{"version":3,"file":"content.js","mappings":"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","sources":["webpack://webtranslator/./src/content/utils.js","webpack://webtranslator/./src/content/content.js"],"sourcesContent":["\"use strict\";\n\nexport function isVisible(element) {\n  const rect = element.getBoundingClientRect();\n  return rect.top <= window.innerHeight && rect.left <= window.innerWidth;\n}\n\nexport function isHidden(element) {\n  return (\n    getComputedStyle(element).display === \"none\" ||\n    !element.textContent ||\n    element.textContent.trim() === \"\"\n  );\n}\n\nexport function hasTextNode(element) {\n  const childNodes = element.childNodes;\n  if (childNodes.length === 0) {\n    return false;\n  }\n  for (const child of childNodes) {\n    if (\n      child.nodeType === Node.TEXT_NODE &&\n      child.nodeValue &&\n      child.nodeValue.trim() !== \"\"\n    ) {\n      return true;\n    }\n  }\n  return false;\n}\n\nexport function hasNoBlockElement(element) {\n  const children = element.children;\n  if (!children || children.length === 0) {\n    return false;\n  }\n  return Array.from(children).every((child) => {\n    const display = getComputedStyle(child).display;\n    return (\n      child.textContent &&\n      child.textContent.trim() !== \"\" &&\n      child.tagName !== \"BASE\" &&\n      child.tagName !== \"LINK\" &&\n      child.tagName !== \"NOSCRIPT\" &&\n      child.tagName !== \"SCRIPT\" &&\n      child.tagName !== \"STYLE\" &&\n      child.tagName !== \"TEMPLATE\" &&\n      child.tagName !== \"TITLE\" &&\n      child.tagName !== \"AUDIO\" &&\n      child.tagName !== \"CANVAS\" &&\n      child.tagName !== \"IMG\" &&\n      child.tagName !== \"MATH\" &&\n      child.tagName !== \"OBJECT\" &&\n      child.tagName !== \"PICTURE\" &&\n      child.tagName !== \"SVG\" &&\n      child.tagName !== \"VIDEO\" &&\n      display !== \"block\" &&\n      display !== \"flex\" &&\n      display !== \"table-row\" &&\n      display !== \"table-cell\" &&\n      display !== \"none\"\n    );\n  });\n}\n\nexport function scrollDidStop(callback, refresh = 200) {\n  let isScrolling;\n  window.addEventListener(\n    \"scroll\",\n    function (event) {\n      window.clearTimeout(isScrolling);\n      isScrolling = setTimeout(callback, refresh);\n    },\n    {\n      once: false,\n      passive: true,\n      capture: true,\n    }\n  );\n}\n\nexport function once(fn, context) {\n  let result;\n  return function () {\n    if (fn) {\n      result = fn.apply(context || this, arguments);\n      fn = undefined;\n    }\n    return result;\n  };\n}\n\nexport function escapeHTML(text) {\n  const div = document.createElement(\"div\");\n  div.textContent = text;\n  return div.innerHTML;\n}\n\nexport function isTouchDevice() {\n  return (\n    \"ontouchstart\" in window ||\n    navigator.maxTouchPoints > 0 ||\n    navigator.msMaxTouchPoints > 0\n  );\n}\n","\"use strict\";\n\nimport {\n  isVisible,\n  isHidden,\n  hasTextNode,\n  hasNoBlockElement,\n  once,\n  scrollDidStop,\n  isTouchDevice,\n} from \"./utils\";\n\nclass App {\n  #uid = 1;\n  #sourceLanguage = undefined;\n  #targetLanguage = undefined;\n  #originalTexts = {};\n  #translatedTexts = {};\n  #visibleElements = {};\n\n  #toastProgress = undefined;\n  #toastError = undefined;\n\n  #isProcessing = false;\n  #shouldProcessAfterScrolling = false;\n  #isShowingOriginal = false;\n\n  constructor() {\n    this.#init();\n  }\n\n  #init() {\n    const link = document.createElement(\"link\");\n    link.setAttribute(\"rel\", \"stylesheet\");\n    link.setAttribute(\"href\", browser.runtime.getURL(\"assets/nord.min.css\"));\n    document.head.appendChild(link);\n\n    this.#restoreState();\n\n    const popover = this.#getPopover();\n    if (popover) {\n      popover.remove();\n    }\n    const tooltip = document.getElementById(\"translate-button\");\n    if (tooltip) {\n      tooltip.remove();\n    }\n\n    this.#toastProgress = this.#createToastProgress();\n    this.#toastError = this.#createToastError();\n\n    this.#setupListeners();\n    this.#observeTextSelection();\n  }\n\n  #restoreState() {\n    const id = \"__wtdl-global-data\";\n    const global = document.getElementById(id);\n    if (global) {\n      if (global.dataset.wtdlOriginalTexts) {\n        try {\n          this.#originalTexts = JSON.parse(global.dataset.wtdlOriginalTexts);\n        } catch (error) {}\n      }\n      return;\n    }\n    document.body.insertAdjacentHTML(\"beforeend\", `<div id=\"${id}\"></div>`);\n    document.getElementById(id).style.display = \"none\";\n  }\n\n  #saveState() {\n    const global = document.getElementById(\"__wtdl-global-data\");\n    if (global) {\n      global.dataset.wtdlOriginalTexts = JSON.stringify(this.#originalTexts);\n    }\n  }\n\n  #setupListeners() {\n    browser.runtime.onMessage.addListener(\n      async (request, sender, sendResponse) => {\n        if (!request) {\n          return;\n        }\n        switch (request.method) {\n          case \"translate\": {\n            this.#shouldProcessAfterScrolling = true;\n\n            await this.#translatePage(request);\n\n            once(\n              scrollDidStop(async () => {\n                if (this.#shouldProcessAfterScrolling) {\n                  await this.#translatePage({\n                    sourceLanguage: this.#sourceLanguage,\n                    targetLanguage: this.#targetLanguage,\n                  });\n                }\n              }, 500)\n            )();\n\n            sendResponse();\n            break;\n          }\n          case \"responseTranslate\": {\n            const handleError = (error) => {\n              const message =\n                error || browser.i18n.getMessage(\"error_message_generic_error\");\n              this.#abortTranslation(message);\n            };\n\n            const response = request;\n            if (!response || !response.result) {\n              handleError();\n              return;\n            }\n\n            const result = response.result.result;\n            if (result && result.texts) {\n              this.#sourceLanguage = result.lang;\n              this.#targetLanguage = request.targetLanguage;\n\n              const translatedTexts = result.texts;\n\n              const visibleElements = this.#visibleElements[response.key];\n              this.#visibleElements[response.key] = undefined;\n\n              if (translatedTexts.length === visibleElements.length) {\n                for (let i = 0; i < visibleElements.length; i++) {\n                  const element = visibleElements[i].element;\n                  const text = translatedTexts[i].text;\n                  const uid = element.dataset.wtdlUid || this.#uid++;\n\n                  if (element.dataset.wtdlOriginal !== \"true\") {\n                    this.#originalTexts[uid] = element.innerHTML;\n                  }\n                  this.#translatedTexts[uid] = text;\n                  element.innerHTML = text;\n\n                  element.dataset.wtdlUid = `${uid}`;\n                  element.dataset.wtdlOriginal = \"true\";\n                  element.dataset.wtdlTranslated = \"true\";\n                }\n\n                this.#saveState();\n              }\n            } else if (response.result.error) {\n              const message =\n                response.result.error.code === 1045601\n                  ? browser.i18n.getMessage(\n                      \"error_message_quota_has_been_reached\"\n                    )\n                  : response.result.error.message;\n              handleError(message);\n              return;\n            } else {\n              handleError();\n              return;\n            }\n\n            this.#finishTranslation();\n          }\n          case \"getContentState\": {\n            if (this.#isProcessing) {\n              sendResponse({ result: { isProcessing: this.#isProcessing } });\n            } else if (Object.keys(this.#originalTexts).length > 0) {\n              sendResponse({\n                result: {\n                  sourceLanguage: this.#sourceLanguage,\n                  targetLanguage: this.#targetLanguage,\n                  isShowingOriginal: this.#isShowingOriginal,\n                },\n              });\n            } else {\n              sendResponse(undefined);\n            }\n            break;\n          }\n          case \"showOriginal\": {\n            this.#shouldProcessAfterScrolling = false;\n            this.#isShowingOriginal = true;\n\n            const elements = document.querySelectorAll(\n              '[data-wtdl-translated=\"true\"]'\n            );\n            for (const element of elements) {\n              const uid = element.dataset.wtdlUid;\n              const originalText = this.#originalTexts[uid];\n              if (originalText === undefined) {\n                continue;\n              }\n              element.innerHTML = originalText;\n              element.dataset.wtdlTranslated = \"false\";\n            }\n            sendResponse();\n            break;\n          }\n          case \"startTranslateSelection\": {\n            const selection = window.getSelection();\n\n            let position = this.#getExistingPopoverPosition();\n            if (!position && selection.rangeCount) {\n              const textRange = selection.getRangeAt(0);\n              const selectionRect = textRange.getBoundingClientRect();\n\n              const x = selectionRect.left + window.scrollX;\n              const y = selectionRect.bottom + window.scrollY + 30;\n              position = { x, y };\n            }\n\n            const popover = this.#createPopover(position);\n            popover.setAttribute(\"loading\", true);\n\n            sendResponse();\n            break;\n          }\n          case \"finishTranslateSelection\": {\n            const result = request.result;\n            const popover = this.#getPopover();\n            if (popover) {\n              if (result.result && result.result.texts) {\n                const text = result.result.texts.map((t) => t.text).join(\"\\n\");\n                popover.setAttribute(\"result\", `${text}`);\n                popover.setAttribute(\"lang\", `${request.targetLanguage || \"\"}`);\n              } else {\n                if (result.error) {\n                  const message = browser.i18n.getMessage(\n                    \"error_message_generic_error\"\n                  );\n                  popover.setAttribute(\"error\", message);\n                } else {\n                  const message = browser.i18n.getMessage(\n                    \"error_message_generic_error\"\n                  );\n                  popover.setAttribute(\"error\", message);\n                }\n              }\n              popover.setAttribute(\"loading\", false);\n            }\n            sendResponse();\n            break;\n          }\n          case \"getSelection\": {\n            const selection = window.getSelection();\n            sendResponse({\n              result: selection ? selection.toString() : undefined,\n            });\n            break;\n          }\n          default: {\n            sendResponse();\n            break;\n          }\n        }\n      }\n    );\n\n    browser.storage.onChanged.addListener((changes, areaName) => {\n      if (areaName === \"local\" && \"selectedTargetLanguage\" in changes) {\n        const popover = this.#getPopover();\n        if (popover) {\n          popover.setAttribute(\"lang\", changes.selectedTargetLanguage.newValue);\n          browser.runtime.sendMessage({\n            method: \"translateSelection\",\n            selectionText: undefined,\n          });\n        }\n      }\n    });\n  }\n\n  #observeTextSelection() {\n    document.addEventListener(\"pointerup\", async (event) => {\n      event.preventDefault();\n\n      const selection = window.getSelection();\n      if (!selection.rangeCount) {\n        return;\n      }\n      let textRange = selection.getRangeAt(0).cloneRange();\n\n      const selectionText = selection ? selection.toString().trim() : \"\";\n      if (!selectionText && !selection.rangeCount) {\n        this.#removeTooltip();\n        return;\n      }\n\n      setTimeout(() => {\n        textRange = selection.rangeCount\n          ? selection.getRangeAt(0).cloneRange()\n          : textRange;\n        textRange.collapse(selection.anchorOffset > selection.focusOffset);\n        const selectionRect = textRange.getBoundingClientRect();\n\n        const x = selectionRect.right + window.scrollX - 20;\n        const y = selectionRect.bottom + window.scrollY + 40;\n\n        {\n          const selection = window.getSelection();\n          if (!selection || !selection.toString().trim()) {\n            this.#removeTooltip();\n            return;\n          }\n        }\n\n        browser.storage.local.get([\"settingsShowsIconForReading\"], (result) => {\n          const showsIconForReading =\n            (result.settingsShowsIconForReading === undefined &&\n              isTouchDevice()) ||\n            result.settingsShowsIconForReading;\n          if (showsIconForReading) {\n            const tooltip = this.#createTooltip({ x, y });\n            tooltip.addEventListener(\"tooltipClick\", (event) => {\n              event.preventDefault();\n              event.stopPropagation();\n\n              if (selectionText) {\n                browser.runtime.sendMessage({\n                  method: \"translateSelection\",\n                  selectionText,\n                });\n              }\n              tooltip.remove();\n\n              return false;\n            });\n          }\n        });\n      }, 100);\n    });\n  }\n\n  #createTooltip(position) {\n    const id = \"translate-button\";\n    {\n      const tooltip = document.getElementById(id);\n      if (tooltip) {\n        tooltip.remove();\n      }\n    }\n\n    document.body.insertAdjacentHTML(\n      \"beforeend\",\n      `<translate-button id=\"${id}\"></translate-button>`\n    );\n    const tooltip = document.getElementById(id);\n    tooltip.setAttribute(\"position\", JSON.stringify(position));\n\n    document.addEventListener(\n      \"touchstart\",\n      (event) => {\n        if (event.target.closest(id)) {\n          return;\n        }\n        tooltip.remove();\n      },\n      { once: true }\n    );\n\n    return tooltip;\n  }\n\n  #removeTooltip() {\n    const id = \"translate-button\";\n    const tooltip = document.getElementById(id);\n    if (tooltip) {\n      tooltip.remove();\n    }\n  }\n\n  #createToastProgress() {\n    const id = \"toast-progress\";\n    const toast = document.getElementById(id);\n    if (toast) {\n      toast.remove();\n    }\n\n    document.body.insertAdjacentHTML(\n      \"beforeend\",\n      `<toast-progress id=\"${id}\"></toast-progress>`\n    );\n    return document.getElementById(id);\n  }\n\n  #createToastError() {\n    const id = \"toast-error\";\n    const toast = document.getElementById(id);\n    if (toast) {\n      toast.remove();\n    }\n\n    document.body.insertAdjacentHTML(\n      \"beforeend\",\n      `<toast-error id=\"${id}\"></toast-error>`\n    );\n    return document.getElementById(id);\n  }\n\n  #createPopover(position) {\n    const id = \"translate-popover\";\n    {\n      const popover = document.getElementById(id);\n      if (popover) {\n        popover.remove();\n      }\n    }\n\n    document.body.insertAdjacentHTML(\n      \"beforeend\",\n      `<translate-popover id=\"${id}\"></translate-popover>`\n    );\n    const popover = document.getElementById(id);\n    popover.setAttribute(\"position\", JSON.stringify(position));\n    browser.storage.local.get([\"selectedTargetLanguage\"], (result) => {\n      if (result && result.selectedTargetLanguage) {\n        popover.setAttribute(\"lang\", result.selectedTargetLanguage);\n      }\n    });\n\n    const onClick = (event) => {\n      if (event.target.closest(id)) {\n        return;\n      }\n      popover.remove();\n      document.removeEventListener(\"click\", onClick);\n    };\n\n    document.addEventListener(\"click\", onClick);\n    popover.addEventListener(\"close\", async () => {\n      popover.remove();\n      document.removeEventListener(\"click\", onClick);\n    });\n    popover.addEventListener(\"change\", async (event) => {\n      await browser.storage.local.set({\n        selectedSourceLanguage: undefined,\n        selectedTargetLanguage: event.detail.selectedTargetLanguage,\n      });\n    });\n\n    return popover;\n  }\n\n  #getPopover() {\n    const id = \"translate-popover\";\n    return document.getElementById(id);\n  }\n\n  #getExistingPopoverPosition() {\n    const popover = this.#getPopover();\n    if (popover) {\n      const draggable = popover.shadowRoot.querySelector(\"#draggable\");\n      if (draggable) {\n        return {\n          x: draggable.offsetLeft,\n          y: draggable.offsetTop,\n        };\n      }\n    }\n    return undefined;\n  }\n\n  async #translatePage(request) {\n    const translatedElements = document.querySelectorAll(\n      '[data-wtdl-translated=\"false\"]'\n    );\n    if (this.#targetLanguage === request.targetLanguage) {\n      // Restore translated texts\n      for (const element of translatedElements) {\n        const uid = element.dataset.wtdlUid;\n        const translatedText = this.#translatedTexts[uid];\n        element.innerHTML = translatedText;\n        element.dataset.wtdlTranslated = \"true\";\n      }\n    }\n\n    const visibleElements = await collectVisibleElements();\n    if (visibleElements.length === 0) {\n      this.#cancelTranslation();\n      return;\n    }\n    this.#startTranslation();\n\n    const key = Math.random().toString(36).substr(2, 9);\n    this.#visibleElements[key] = visibleElements;\n\n    const texts = visibleElements.map((element) => element.text);\n    await browser.runtime.sendMessage({\n      method: \"translate\",\n      texts,\n      sourceLanguage: request.sourceLanguage,\n      targetLanguage: request.targetLanguage,\n      key,\n    });\n  }\n\n  #startTranslation() {\n    this.#toastProgress.setAttribute(\"show\", true);\n\n    this.#isProcessing = true;\n    this.#isShowingOriginal = false;\n\n    browser.runtime.sendMessage({\n      method: \"startTranslation\",\n    });\n  }\n\n  #cancelTranslation() {\n    this.#isShowingOriginal = false;\n\n    browser.runtime.sendMessage({\n      method: \"cancelTranslation\",\n      result: {\n        sourceLanguage: this.#sourceLanguage,\n        targetLanguage: this.#targetLanguage,\n      },\n    });\n  }\n\n  #abortTranslation(errorMessage) {\n    this.#isProcessing = false;\n    this.#isShowingOriginal = false;\n\n    this.#toastProgress.setAttribute(\"show\", false);\n    this.#toastError.setAttribute(\"show\", errorMessage);\n\n    browser.runtime.sendMessage({\n      method: \"abortTranslation\",\n      message: errorMessage,\n    });\n  }\n\n  #finishTranslation() {\n    this.#isProcessing = false;\n    this.#toastProgress.setAttribute(\"show\", false);\n\n    browser.runtime.sendMessage({\n      method: \"finishTranslation\",\n      result: {\n        sourceLanguage: this.#sourceLanguage,\n        targetLanguage: this.#targetLanguage,\n      },\n    });\n  }\n}\n\nasync function collectVisibleElements() {\n  const blockElements = [];\n\n  const children = document.body.children;\n  splitElements(children, blockElements);\n\n  const visibleElements = [];\n  for (const element of blockElements) {\n    const visible = isVisible(element);\n    if (\n      visible &&\n      (element.dataset.wtdlUid === undefined ||\n        element.dataset.wtdlTranslated === \"false\")\n    ) {\n      visibleElements.push({ element, text: element.innerHTML });\n    }\n  }\n\n  return visibleElements;\n}\n\nfunction splitElements(elements, storage) {\n  for (const element of elements) {\n    if (isHidden(element)) {\n      continue;\n    }\n    if (element.nodeName === \"NOSCRIPT\" || element.nodeName === \"svg\") {\n      continue;\n    }\n\n    const children = element.children;\n    const childNodes = Array.from(element.childNodes).filter((node) => {\n      if (node.nodeType === Node.COMMENT_NODE) {\n        return false;\n      }\n      if (node.nodeType === Node.TEXT_NODE) {\n        return node.nodeValue && node.nodeValue.trim();\n      }\n      return true;\n    });\n\n    if (hasTextNode(element)) {\n      if (childNodes.length === 1 && children.length > 0) {\n        splitElements(children, storage);\n      } else {\n        storage.push(element);\n      }\n      continue;\n    }\n    if (hasNoBlockElement(element)) {\n      if (childNodes.length === 1 && children.length > 0) {\n        splitElements(children, storage);\n      } else {\n        storage.push(element);\n      }\n      continue;\n    }\n\n    if (children.length === 0) {\n      continue;\n    }\n    splitElements(children, storage);\n  }\n}\n\nnew App();\n"],"names":["_createForOfIteratorHelper","r","e","t","Symbol","iterator","Array","isArray","a","_arrayLikeToArray","toString","call","slice","constructor","name","from","test","_unsupportedIterableToArray","length","_n","F","s","n","done","value","f","TypeError","o","u","next","isVisible","element","rect","getBoundingClientRect","top","window","innerHeight","left","innerWidth","isHidden","getComputedStyle","display","textContent","trim","hasTextNode","childNodes","_step","_iterator","child","nodeType","Node","TEXT_NODE","nodeValue","err","hasNoBlockElement","children","every","tagName","scrollDidStop","callback","isScrolling","refresh","arguments","undefined","addEventListener","event","clearTimeout","setTimeout","once","passive","capture","fn","context","result","apply","this","_typeof","prototype","_regeneratorRuntime","Object","hasOwnProperty","defineProperty","i","c","asyncIterator","toStringTag","define","enumerable","configurable","writable","wrap","Generator","create","Context","makeInvokeMethod","tryCatch","type","arg","h","l","y","GeneratorFunction","GeneratorFunctionPrototype","p","d","getPrototypeOf","v","values","g","defineIteratorMethods","forEach","_invoke","AsyncIterator","invoke","resolve","__await","then","callInvokeWithMethodAndArg","Error","method","delegate","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","resultName","nextLoc","pushTryEntry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","push","resetTryEntry","completion","reset","isNaN","displayName","isGeneratorFunction","mark","setPrototypeOf","__proto__","awrap","async","Promise","keys","reverse","pop","prev","charAt","stop","rval","handle","complete","finish","delegateYield","asyncGeneratorStep","_asyncToGenerator","_next","_throw","_defineProperties","_toPropertyKey","key","_createClass","toPrimitive","String","Number","_toPrimitive","_classPrivateFieldInitSpec","_checkPrivateRedeclaration","set","has","_classPrivateFieldGet","get","_assertClassBrand","_classPrivateFieldSet","_uid","WeakMap","_sourceLanguage","_targetLanguage","_originalTexts","_translatedTexts","_visibleElements","_toastProgress","_toastError","_isProcessing","_shouldProcessAfterScrolling","_isShowingOriginal","_App_brand","WeakSet","_init","link","document","createElement","setAttribute","browser","runtime","getURL","head","appendChild","_restoreState","popover","_getPopover","remove","tooltip","getElementById","_createToastProgress","_createToastError","_setupListeners","_observeTextSelection","id","global","dataset","wtdlOriginalTexts","JSON","parse","error","body","insertAdjacentHTML","concat","style","_saveState","stringify","_this","onMessage","addListener","_ref","_callee2","request","sender","sendResponse","handleError","response","translatedTexts","visibleElements","_this$uid","_this$uid2","text","uid","message","elements","_iterator2","_step2","_element","_uid2","originalText","selection","position","textRange","selectionRect","x","_result","_popover","_text","_message","_message2","_selection","_context2","t0","_translatePage","_callee","_context","sourceLanguage","targetLanguage","i18n","getMessage","_abortTranslation","texts","lang","wtdlUid","wtdlOriginal","innerHTML","wtdlTranslated","code","_finishTranslation","isProcessing","isShowingOriginal","querySelectorAll","t1","getSelection","_getExistingPopoverPosition","rangeCount","getRangeAt","scrollX","bottom","scrollY","_createPopover","map","join","_x","_x2","_x3","storage","onChanged","changes","areaName","selectedTargetLanguage","newValue","sendMessage","selectionText","_this2","_ref3","_callee3","_context3","preventDefault","cloneRange","_removeTooltip","collapse","anchorOffset","focusOffset","right","local","settingsShowsIconForReading","navigator","maxTouchPoints","msMaxTouchPoints","_createTooltip","stopPropagation","_x4","target","closest","toast","onClick","removeEventListener","_callee4","_context4","_ref5","_callee5","_context5","selectedSourceLanguage","detail","_x5","draggable","shadowRoot","querySelector","offsetLeft","offsetTop","_x6","_translatePage2","_callee7","translatedElements","_iterator3","_step3","translatedText","_context7","collectVisibleElements","_cancelTranslation","_startTranslation","Math","random","substr","errorMessage","_collectVisibleElements","_callee6","blockElements","_i","_blockElements","_context6","splitElements","nodeName","filter","node","COMMENT_NODE","App","_classCallCheck","add"],"sourceRoot":""}