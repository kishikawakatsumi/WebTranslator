{"version":3,"file":"content.js","mappings":"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","sources":["webpack://webtranslator/./src/content/utils.js","webpack://webtranslator/./src/content/content.js"],"sourcesContent":["\"use strict\";\n\nexport function isVisible(element) {\n  const rect = element.getBoundingClientRect();\n  return rect.top <= window.innerHeight && rect.left <= window.innerWidth;\n}\n\nexport function isHidden(element) {\n  return (\n    getComputedStyle(element).display === \"none\" ||\n    !element.textContent ||\n    element.textContent.trim() === \"\"\n  );\n}\n\nexport function hasTextNode(element) {\n  const childNodes = element.childNodes;\n  if (childNodes.length === 0) {\n    return false;\n  }\n  for (const child of childNodes) {\n    if (\n      child.nodeType === Node.TEXT_NODE &&\n      child.nodeValue &&\n      child.nodeValue.trim() !== \"\"\n    ) {\n      return true;\n    }\n  }\n  return false;\n}\n\nexport function hasNoBlockElement(element) {\n  const children = element.children;\n  if (!children || children.length === 0) {\n    return false;\n  }\n  return Array.from(children).every((child) => {\n    const display = getComputedStyle(child).display;\n    return (\n      child.textContent &&\n      child.textContent.trim() !== \"\" &&\n      child.tagName !== \"BASE\" &&\n      child.tagName !== \"LINK\" &&\n      child.tagName !== \"NOSCRIPT\" &&\n      child.tagName !== \"SCRIPT\" &&\n      child.tagName !== \"STYLE\" &&\n      child.tagName !== \"TEMPLATE\" &&\n      child.tagName !== \"TITLE\" &&\n      child.tagName !== \"AUDIO\" &&\n      child.tagName !== \"CANVAS\" &&\n      child.tagName !== \"IMG\" &&\n      child.tagName !== \"MATH\" &&\n      child.tagName !== \"OBJECT\" &&\n      child.tagName !== \"PICTURE\" &&\n      child.tagName !== \"SVG\" &&\n      child.tagName !== \"VIDEO\" &&\n      display !== \"block\" &&\n      display !== \"flex\" &&\n      display !== \"table-row\" &&\n      display !== \"table-cell\" &&\n      display !== \"none\"\n    );\n  });\n}\n\nexport function scrollDidStop(callback, refresh = 200) {\n  let isScrolling;\n  window.addEventListener(\n    \"scroll\",\n    function (event) {\n      window.clearTimeout(isScrolling);\n      isScrolling = setTimeout(callback, refresh);\n    },\n    {\n      once: false,\n      passive: true,\n      capture: true,\n    }\n  );\n}\n\nexport function once(fn, context) {\n  let result;\n  return function () {\n    if (fn) {\n      result = fn.apply(context || this, arguments);\n      fn = undefined;\n    }\n    return result;\n  };\n}\n\nexport function escapeHTML(text) {\n  const div = document.createElement(\"div\");\n  div.textContent = text;\n  return div.innerHTML;\n}\n\nexport function isTouchDevice() {\n  return (\n    \"ontouchstart\" in window ||\n    navigator.maxTouchPoints > 0 ||\n    navigator.msMaxTouchPoints > 0\n  );\n}\n","\"use strict\";\n\nimport {\n  isVisible,\n  isHidden,\n  hasTextNode,\n  hasNoBlockElement,\n  once,\n  scrollDidStop,\n  isTouchDevice,\n} from \"./utils\";\n\nclass App {\n  #uid = 1;\n  #sourceLanguage = undefined;\n  #targetLanguage = undefined;\n  #originalTexts = {};\n  #translatedTexts = {};\n\n  #toastProgress = undefined;\n  #toastError = undefined;\n\n  #isProcessing = false;\n  #shouldProcessAfterScrolling = false;\n  #isShowingOriginal = false;\n\n  constructor() {\n    this.#init();\n  }\n\n  #init() {\n    this.#restoreState();\n\n    const popover = this.#getPopover();\n    if (popover) {\n      popover.remove();\n    }\n    const tooltip = document.getElementById(\"translate-button\");\n    if (tooltip) {\n      tooltip.remove();\n    }\n\n    this.#toastProgress = this.#createToastProgress();\n    this.#toastError = this.#createToastError();\n\n    this.#setupListeners();\n    if (isTouchDevice()) {\n      this.#observeTextSelection();\n    }\n  }\n\n  #restoreState() {\n    const id = \"__wtdl-global-data\";\n    const global = document.getElementById(id);\n    if (global) {\n      if (global.dataset.wtdlOriginalTexts) {\n        try {\n          this.#originalTexts = JSON.parse(global.dataset.wtdlOriginalTexts);\n        } catch (error) {}\n      }\n      return;\n    }\n    document.body.insertAdjacentHTML(\n      \"beforeend\",\n      `<div id=\"${id}\" style=\"display: none;\"></div>`\n    );\n  }\n\n  #saveState() {\n    const global = document.getElementById(\"__wtdl-global-data\");\n    if (global) {\n      global.dataset.wtdlOriginalTexts = JSON.stringify(this.#originalTexts);\n    }\n  }\n\n  #setupListeners() {\n    browser.runtime.onMessage.addListener(\n      async (request, sender, sendResponse) => {\n        if (!request) {\n          return;\n        }\n        switch (request.method) {\n          case \"translate\": {\n            this.#shouldProcessAfterScrolling = true;\n\n            await this.#translatePage(request);\n\n            once(\n              scrollDidStop(async () => {\n                if (this.#shouldProcessAfterScrolling) {\n                  await this.#translatePage({\n                    sourceLanguage: this.#sourceLanguage,\n                    targetLanguage: this.#targetLanguage,\n                  });\n                }\n              }, 500)\n            )();\n\n            sendResponse();\n            break;\n          }\n          case \"getContentState\": {\n            if (this.#isProcessing) {\n              sendResponse({ result: { isProcessing: this.#isProcessing } });\n            } else if (Object.keys(this.#originalTexts).length > 0) {\n              sendResponse({\n                result: {\n                  sourceLanguage: this.#sourceLanguage,\n                  targetLanguage: this.#targetLanguage,\n                  isShowingOriginal: this.#isShowingOriginal,\n                },\n              });\n            } else {\n              sendResponse(undefined);\n            }\n            break;\n          }\n          case \"showOriginal\": {\n            this.#shouldProcessAfterScrolling = false;\n            this.#isShowingOriginal = true;\n\n            const elements = document.querySelectorAll(\n              '[data-wtdl-translated=\"true\"]'\n            );\n            for (const element of elements) {\n              const uid = element.dataset.wtdlUid;\n              const originalText = this.#originalTexts[uid];\n              if (originalText === undefined) {\n                continue;\n              }\n              element.innerHTML = originalText;\n              element.dataset.wtdlTranslated = \"false\";\n            }\n            sendResponse();\n            break;\n          }\n          case \"startTranslateSelection\": {\n            const selection = window.getSelection();\n\n            let position = this.#getExistingPopoverPosition();\n            if (!position && selection.rangeCount) {\n              const textRange = selection.getRangeAt(0);\n              const selectionRect = textRange.getBoundingClientRect();\n\n              const x = selectionRect.left + window.scrollX;\n              const y = selectionRect.bottom + window.scrollY + 30;\n              position = { x, y };\n            }\n\n            const popover = this.#createPopover(position);\n            popover.setAttribute(\"loading\", true);\n\n            sendResponse();\n            break;\n          }\n          case \"finishTranslateSelection\": {\n            const result = request.result;\n            const popover = this.#getPopover();\n            if (popover) {\n              if (result.result && result.result.texts) {\n                const text = result.result.texts.map((t) => t.text).join(\"\\n\");\n                popover.setAttribute(\"result\", `${text}`);\n                popover.setAttribute(\"lang\", `${request.targetLanguage || \"\"}`);\n              } else {\n                if (result.error) {\n                  const message = browser.i18n.getMessage(\n                    \"error_message_generic_error\"\n                  );\n                  popover.setAttribute(\"error\", message);\n                } else {\n                  const message = browser.i18n.getMessage(\n                    \"error_message_generic_error\"\n                  );\n                  popover.setAttribute(\"error\", message);\n                }\n              }\n              popover.setAttribute(\"loading\", false);\n            }\n            sendResponse();\n            break;\n          }\n          case \"getSelection\": {\n            const selection = window.getSelection();\n            sendResponse({\n              result: selection ? selection.toString() : undefined,\n            });\n            break;\n          }\n          default: {\n            sendResponse();\n            break;\n          }\n        }\n      }\n    );\n\n    browser.storage.onChanged.addListener((changes, areaName) => {\n      if (areaName === \"local\" && \"selectedTargetLanguage\" in changes) {\n        const popover = this.#getPopover();\n        if (popover) {\n          popover.setAttribute(\"lang\", changes.selectedTargetLanguage.newValue);\n          browser.runtime.sendMessage({\n            method: \"translateSelection\",\n            selectionText: undefined,\n          });\n        }\n      }\n    });\n  }\n\n  #observeTextSelection() {\n    document.addEventListener(\"pointerup\", async (event) => {\n      event.preventDefault();\n\n      const selection = window.getSelection();\n      if (!selection.rangeCount) {\n        return;\n      }\n      let textRange = selection.getRangeAt(0).cloneRange();\n\n      const selectionText = selection ? selection.toString().trim() : \"\";\n      if (!selectionText && !selection.rangeCount) {\n        this.#removeTooltip();\n        return;\n      }\n\n      setTimeout(() => {\n        textRange = selection.rangeCount\n          ? selection.getRangeAt(0).cloneRange()\n          : textRange;\n        textRange.collapse(selection.anchorOffset > selection.focusOffset);\n        const selectionRect = textRange.getBoundingClientRect();\n\n        const x = selectionRect.right + window.scrollX - 20;\n        const y = selectionRect.bottom + window.scrollY + 40;\n\n        {\n          const selection = window.getSelection();\n          if (!selection || !selection.toString().trim()) {\n            this.#removeTooltip();\n            return;\n          }\n        }\n\n        browser.storage.local.get([\"settingsShowsIconForReading\"], (result) => {\n          const showsIconForReading =\n            result.settingsShowsIconForReading === undefined ||\n            result.settingsShowsIconForReading;\n          if (showsIconForReading) {\n            const tooltip = this.#createTooltip({ x, y });\n            tooltip.addEventListener(\"tooltipClick\", (event) => {\n              event.preventDefault();\n              event.stopPropagation();\n\n              if (selectionText) {\n                browser.runtime.sendMessage({\n                  method: \"translateSelection\",\n                  selectionText,\n                });\n              }\n              tooltip.remove();\n\n              return false;\n            });\n          }\n        });\n      }, 100);\n    });\n  }\n\n  #createTooltip(position) {\n    const id = \"translate-button\";\n    {\n      const tooltip = document.getElementById(id);\n      if (tooltip) {\n        tooltip.remove();\n      }\n    }\n\n    document.body.insertAdjacentHTML(\n      \"beforeend\",\n      `<translate-button id=\"${id}\"></translate-button>`\n    );\n    const tooltip = document.getElementById(id);\n    tooltip.setAttribute(\"position\", JSON.stringify(position));\n\n    document.addEventListener(\n      \"touchstart\",\n      (event) => {\n        if (event.target.closest(id)) {\n          return;\n        }\n        tooltip.remove();\n      },\n      { once: true }\n    );\n\n    return tooltip;\n  }\n\n  #removeTooltip() {\n    const id = \"translate-button\";\n    const tooltip = document.getElementById(id);\n    if (tooltip) {\n      tooltip.remove();\n    }\n  }\n\n  #createToastProgress() {\n    const id = \"toast-progress\";\n    const toast = document.getElementById(id);\n    if (toast) {\n      toast.remove();\n    }\n\n    document.body.insertAdjacentHTML(\n      \"beforeend\",\n      `<toast-progress id=\"${id}\"></toast-progress>`\n    );\n    return document.getElementById(id);\n  }\n\n  #createToastError() {\n    const id = \"toast-error\";\n    const toast = document.getElementById(id);\n    if (toast) {\n      toast.remove();\n    }\n\n    document.body.insertAdjacentHTML(\n      \"beforeend\",\n      `<toast-error id=\"${id}\"></toast-error>`\n    );\n    return document.getElementById(id);\n  }\n\n  #createPopover(position) {\n    const id = \"translate-popover\";\n    {\n      const popover = document.getElementById(id);\n      if (popover) {\n        popover.remove();\n      }\n    }\n\n    document.body.insertAdjacentHTML(\n      \"beforeend\",\n      `<translate-popover id=\"${id}\"></translate-popover>`\n    );\n    const popover = document.getElementById(id);\n    popover.setAttribute(\"position\", JSON.stringify(position));\n    browser.storage.local.get([\"selectedTargetLanguage\"], (result) => {\n      if (result && result.selectedTargetLanguage) {\n        popover.setAttribute(\"lang\", result.selectedTargetLanguage);\n      }\n    });\n\n    const onClick = (event) => {\n      if (event.target.closest(id)) {\n        return;\n      }\n      popover.remove();\n      document.removeEventListener(\"click\", onClick);\n    };\n\n    document.addEventListener(\"click\", onClick);\n    popover.addEventListener(\"close\", async () => {\n      popover.remove();\n      document.removeEventListener(\"click\", onClick);\n    });\n    popover.addEventListener(\"change\", async (event) => {\n      await browser.storage.local.set({\n        selectedSourceLanguage: undefined,\n        selectedTargetLanguage: event.detail.selectedTargetLanguage,\n      });\n    });\n\n    return popover;\n  }\n\n  #getPopover() {\n    const id = \"translate-popover\";\n    return document.getElementById(id);\n  }\n\n  #getExistingPopoverPosition() {\n    const popover = this.#getPopover();\n    if (popover) {\n      const draggable = popover.shadowRoot.querySelector(\"#draggable\");\n      if (draggable) {\n        return {\n          x: draggable.offsetLeft,\n          y: draggable.offsetTop,\n        };\n      }\n    }\n    return undefined;\n  }\n\n  async #translatePage(request) {\n    const translatedElements = document.querySelectorAll(\n      '[data-wtdl-translated=\"false\"]'\n    );\n    if (this.#targetLanguage === request.targetLanguage) {\n      // Restore translated texts\n      for (const element of translatedElements) {\n        const uid = element.dataset.wtdlUid;\n        const translatedText = this.#translatedTexts[uid];\n        element.innerHTML = translatedText;\n        element.dataset.wtdlTranslated = \"true\";\n      }\n    }\n\n    const visibleElements = await collectVisibleElements();\n    if (visibleElements.length === 0) {\n      this.#cancelTranslation();\n      return;\n    }\n    this.#startTranslation();\n\n    const texts = visibleElements.map((element) => element.text);\n    const response = await browser.runtime.sendMessage({\n      method: \"translate\",\n      texts,\n      sourceLanguage: request.sourceLanguage,\n      targetLanguage: request.targetLanguage,\n    });\n\n    const handleError = (error) => {\n      const message =\n        error || browser.i18n.getMessage(\"error_message_generic_error\");\n      this.#abortTranslation(message);\n    };\n\n    if (!response || !response.result) {\n      handleError();\n      return;\n    }\n    const result = response.result.result;\n    if (result && result.texts) {\n      this.#sourceLanguage = result.lang;\n      this.#targetLanguage = request.targetLanguage;\n\n      const translatedTexts = result.texts;\n      if (translatedTexts.length === visibleElements.length) {\n        for (let i = 0; i < visibleElements.length; i++) {\n          const element = visibleElements[i].element;\n          const text = translatedTexts[i].text;\n          const uid = element.dataset.wtdlUid || this.#uid++;\n\n          if (element.dataset.wtdlOriginal !== \"true\") {\n            this.#originalTexts[uid] = element.innerHTML;\n          }\n          this.#translatedTexts[uid] = text;\n          element.innerHTML = text;\n\n          element.dataset.wtdlUid = `${uid}`;\n          element.dataset.wtdlOriginal = \"true\";\n          element.dataset.wtdlTranslated = \"true\";\n        }\n\n        this.#saveState();\n      }\n    } else if (response.result.error) {\n      const message =\n        response.result.error.code === 1045601\n          ? browser.i18n.getMessage(\"error_message_quota_has_been_reached\")\n          : response.result.error.message;\n      handleError(message);\n      return;\n    } else {\n      handleError();\n      return;\n    }\n\n    this.#finishTranslation();\n  }\n\n  #startTranslation() {\n    this.#toastProgress.setAttribute(\"show\", true);\n\n    this.#isProcessing = true;\n    this.#isShowingOriginal = false;\n\n    browser.runtime.sendMessage({\n      method: \"startTranslation\",\n    });\n  }\n\n  #cancelTranslation() {\n    this.#isShowingOriginal = false;\n\n    browser.runtime.sendMessage({\n      method: \"cancelTranslation\",\n      result: {\n        sourceLanguage: this.#sourceLanguage,\n        targetLanguage: this.#targetLanguage,\n      },\n    });\n  }\n\n  #abortTranslation(errorMessage) {\n    this.#isProcessing = false;\n    this.#isShowingOriginal = false;\n\n    this.#toastProgress.setAttribute(\"show\", false);\n    this.#toastError.setAttribute(\"show\", errorMessage);\n\n    browser.runtime.sendMessage({\n      method: \"abortTranslation\",\n      message: errorMessage,\n    });\n  }\n\n  #finishTranslation() {\n    this.#isProcessing = false;\n    this.#toastProgress.setAttribute(\"show\", false);\n\n    browser.runtime.sendMessage({\n      method: \"finishTranslation\",\n      result: {\n        sourceLanguage: this.#sourceLanguage,\n        targetLanguage: this.#targetLanguage,\n      },\n    });\n  }\n}\n\nasync function collectVisibleElements() {\n  const blockElements = [];\n\n  const children = document.body.children;\n  splitElements(children, blockElements);\n\n  const visibleElements = [];\n  for (const element of blockElements) {\n    const visible = isVisible(element);\n    if (\n      visible &&\n      (element.dataset.wtdlUid === undefined ||\n        element.dataset.wtdlTranslated === \"false\")\n    ) {\n      visibleElements.push({ element, text: element.innerHTML });\n    }\n  }\n\n  return visibleElements;\n}\n\nfunction splitElements(elements, storage) {\n  for (const element of elements) {\n    if (isHidden(element)) {\n      continue;\n    }\n    if (element.nodeName === \"NOSCRIPT\" || element.nodeName === \"svg\") {\n      continue;\n    }\n\n    const children = element.children;\n    const childNodes = Array.from(element.childNodes).filter((node) => {\n      if (node.nodeType === Node.COMMENT_NODE) {\n        return false;\n      }\n      if (node.nodeType === Node.TEXT_NODE) {\n        return node.nodeValue && node.nodeValue.trim();\n      }\n      return true;\n    });\n\n    if (hasTextNode(element)) {\n      if (childNodes.length === 1 && children.length > 0) {\n        splitElements(children, storage);\n      } else {\n        storage.push(element);\n      }\n      continue;\n    }\n    if (hasNoBlockElement(element)) {\n      if (childNodes.length === 1 && children.length > 0) {\n        splitElements(children, storage);\n      } else {\n        storage.push(element);\n      }\n      continue;\n    }\n\n    if (children.length === 0) {\n      continue;\n    }\n    splitElements(children, storage);\n  }\n}\n\nnew App();\n"],"names":["_createForOfIteratorHelper","o","allowArrayLike","it","Symbol","iterator","Array","isArray","minLen","_arrayLikeToArray","n","Object","prototype","toString","call","slice","constructor","name","from","test","_unsupportedIterableToArray","length","i","F","s","done","value","e","_e","f","TypeError","err","normalCompletion","didErr","step","next","_e2","arr","len","arr2","isVisible","element","rect","getBoundingClientRect","top","window","innerHeight","left","innerWidth","isHidden","getComputedStyle","display","textContent","trim","hasTextNode","childNodes","_step","_iterator","child","nodeType","Node","TEXT_NODE","nodeValue","hasNoBlockElement","children","every","tagName","scrollDidStop","callback","isScrolling","refresh","arguments","undefined","addEventListener","event","clearTimeout","setTimeout","once","passive","capture","fn","context","result","apply","this","_typeof","obj","_regeneratorRuntime","exports","Op","hasOwn","hasOwnProperty","defineProperty","key","desc","$Symbol","iteratorSymbol","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","define","enumerable","configurable","writable","wrap","innerFn","outerFn","self","tryLocsList","protoGenerator","Generator","generator","create","Context","makeInvokeMethod","tryCatch","arg","type","ContinueSentinel","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","getPrototypeOf","NativeIteratorPrototype","values","Gp","defineIteratorMethods","forEach","method","_invoke","AsyncIterator","PromiseImpl","invoke","resolve","reject","record","__await","then","unwrapped","error","previousPromise","callInvokeWithMethodAndArg","state","Error","doneResult","delegate","delegateResult","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","methodName","info","resultName","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","push","resetTryEntry","completion","reset","iterable","iteratorMethod","isNaN","displayName","isGeneratorFunction","genFun","ctor","mark","setPrototypeOf","__proto__","awrap","async","Promise","iter","keys","val","object","reverse","pop","skipTempReset","prev","charAt","stop","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","thrown","delegateYield","asyncGeneratorStep","gen","_next","_throw","_asyncToGenerator","args","_defineProperties","target","props","descriptor","input","hint","prim","toPrimitive","res","String","Number","_toPrimitive","_createClass","Constructor","protoProps","staticProps","_classPrivateMethodInitSpec","privateSet","_checkPrivateRedeclaration","add","_classPrivateFieldInitSpec","privateMap","set","privateCollection","has","_classPrivateFieldGet","receiver","get","_classApplyDescriptorGet","_classExtractFieldDescriptor","_classPrivateFieldSet","_classApplyDescriptorSet","action","_classPrivateMethodGet","_uid","WeakMap","_sourceLanguage","_targetLanguage","_originalTexts","_translatedTexts","_toastProgress","_toastError","_isProcessing","_shouldProcessAfterScrolling","_isShowingOriginal","_init","WeakSet","_restoreState","_saveState","_setupListeners","_observeTextSelection","_createTooltip","_removeTooltip","_createToastProgress","_createToastError","_createPopover","_getPopover","_getExistingPopoverPosition","_translatePage","_startTranslation","_cancelTranslation","_abortTranslation","_finishTranslation","_init2","_restoreState2","popover","_getPopover2","remove","tooltip","document","getElementById","_createToastProgress2","_createToastError2","_setupListeners2","navigator","maxTouchPoints","msMaxTouchPoints","_observeTextSelection2","id","global","dataset","wtdlOriginalTexts","JSON","parse","body","insertAdjacentHTML","concat","_saveState2","stringify","_this","browser","runtime","onMessage","addListener","_ref","_callee2","request","sender","sendResponse","elements","_iterator2","_step2","uid","originalText","selection","position","textRange","selectionRect","x","y","_popover","text","message","_message","_selection","_context2","t0","_translatePage2","_callee","_context","sourceLanguage","targetLanguage","isProcessing","isShowingOriginal","querySelectorAll","wtdlUid","innerHTML","wtdlTranslated","t1","getSelection","_getExistingPopoverPosition2","rangeCount","getRangeAt","scrollX","bottom","scrollY","_createPopover2","setAttribute","texts","map","t","join","i18n","getMessage","_x","_x2","_x3","storage","onChanged","changes","areaName","selectedTargetLanguage","newValue","sendMessage","selectionText","_this2","_ref3","_callee3","_context3","preventDefault","cloneRange","_removeTooltip2","collapse","anchorOffset","focusOffset","right","local","settingsShowsIconForReading","_createTooltip2","stopPropagation","_x4","closest","toast","onClick","removeEventListener","_callee4","_context4","_ref5","_callee5","_context5","selectedSourceLanguage","detail","_x5","draggable","shadowRoot","querySelector","offsetLeft","offsetTop","_x6","_translatePage3","_callee7","translatedElements","_iterator3","_step3","translatedText","visibleElements","response","handleError","translatedTexts","_this$uid","_this$uid2","_element","_uid2","_this3","_context7","collectVisibleElements","_cancelTranslation2","_startTranslation2","_abortTranslation2","lang","wtdlOriginal","code","_finishTranslation2","errorMessage","_collectVisibleElements","_callee6","blockElements","_i","_blockElements","_context6","splitElements","nodeName","filter","node","COMMENT_NODE","App","instance","_classCallCheck"],"sourceRoot":""}