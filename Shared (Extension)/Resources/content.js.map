{"version":3,"file":"content.js","mappings":"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","sources":["webpack://webtranslator/./src/content/utils.js","webpack://webtranslator/./src/content/content.js"],"sourcesContent":["\"use strict\";\n\nexport function isVisible(element) {\n  const rect = element.getBoundingClientRect();\n  return rect.top <= window.innerHeight && rect.left <= window.innerWidth;\n}\n\nexport function isHidden(element) {\n  return (\n    getComputedStyle(element).display === \"none\" ||\n    !element.textContent ||\n    element.textContent.trim() === \"\"\n  );\n}\n\nexport function hasTextNode(element) {\n  const childNodes = element.childNodes;\n  if (childNodes.length === 0) {\n    return false;\n  }\n  for (const child of childNodes) {\n    if (\n      child.nodeType === Node.TEXT_NODE &&\n      child.nodeValue &&\n      child.nodeValue.trim() !== \"\"\n    ) {\n      return true;\n    }\n  }\n  return false;\n}\n\nexport function hasNoBlockElement(element) {\n  const children = element.children;\n  if (!children || children.length === 0) {\n    return false;\n  }\n  return Array.from(children).every((child) => {\n    const display = getComputedStyle(child).display;\n    return (\n      child.textContent &&\n      child.textContent.trim() !== \"\" &&\n      child.tagName !== \"BASE\" &&\n      child.tagName !== \"LINK\" &&\n      child.tagName !== \"NOSCRIPT\" &&\n      child.tagName !== \"SCRIPT\" &&\n      child.tagName !== \"STYLE\" &&\n      child.tagName !== \"TEMPLATE\" &&\n      child.tagName !== \"TITLE\" &&\n      child.tagName !== \"AUDIO\" &&\n      child.tagName !== \"CANVAS\" &&\n      child.tagName !== \"IMG\" &&\n      child.tagName !== \"MATH\" &&\n      child.tagName !== \"OBJECT\" &&\n      child.tagName !== \"PICTURE\" &&\n      child.tagName !== \"SVG\" &&\n      child.tagName !== \"VIDEO\" &&\n      display !== \"block\" &&\n      display !== \"flex\" &&\n      display !== \"table-row\" &&\n      display !== \"table-cell\" &&\n      display !== \"none\"\n    );\n  });\n}\n\nexport function scrollDidStop(callback, refresh = 200) {\n  let isScrolling;\n  window.addEventListener(\n    \"scroll\",\n    function (event) {\n      window.clearTimeout(isScrolling);\n      isScrolling = setTimeout(callback, refresh);\n    },\n    {\n      once: false,\n      passive: true,\n      capture: true,\n    }\n  );\n}\n\nexport function once(fn, context) {\n  let result;\n  return function () {\n    if (fn) {\n      result = fn.apply(context || this, arguments);\n      fn = undefined;\n    }\n    return result;\n  };\n}\n\nexport function escapeHTML(text) {\n  const div = document.createElement(\"div\");\n  div.textContent = text;\n  return div.innerHTML;\n}\n\nexport function isTouchDevice() {\n  return (\n    \"ontouchstart\" in window ||\n    navigator.maxTouchPoints > 0 ||\n    navigator.msMaxTouchPoints > 0\n  );\n}\n","\"use strict\";\n\nimport {\n  isVisible,\n  isHidden,\n  hasTextNode,\n  hasNoBlockElement,\n  once,\n  scrollDidStop,\n  isTouchDevice,\n} from \"./utils\";\n\nclass App {\n  #uid = 1;\n  #sourceLanguage = undefined;\n  #targetLanguage = undefined;\n  #originalTexts = {};\n  #translatedTexts = {};\n\n  #toastProgress = undefined;\n  #toastError = undefined;\n\n  #isProcessing = false;\n  #shouldProcessAfterScrolling = false;\n  #isShowingOriginal = false;\n\n  constructor() {\n    this.#init();\n  }\n\n  #init() {\n    const link = document.createElement(\"link\");\n    link.setAttribute(\"rel\", \"stylesheet\");\n    link.setAttribute(\"href\", browser.runtime.getURL(\"assets/nord.min.css\"));\n    document.head.appendChild(link);\n\n    this.#restoreState();\n\n    const popover = this.#getPopover();\n    if (popover) {\n      popover.remove();\n    }\n    const tooltip = document.getElementById(\"translate-button\");\n    if (tooltip) {\n      tooltip.remove();\n    }\n\n    this.#toastProgress = this.#createToastProgress();\n    this.#toastError = this.#createToastError();\n\n    this.#setupListeners();\n    this.#observeTextSelection();\n  }\n\n  #restoreState() {\n    const id = \"__wtdl-global-data\";\n    const global = document.getElementById(id);\n    if (global) {\n      if (global.dataset.wtdlOriginalTexts) {\n        try {\n          this.#originalTexts = JSON.parse(global.dataset.wtdlOriginalTexts);\n        } catch (error) {}\n      }\n      return;\n    }\n    document.body.insertAdjacentHTML(\"beforeend\", `<div id=\"${id}\"></div>`);\n    document.getElementById(id).style.display = \"none\";\n  }\n\n  #saveState() {\n    const global = document.getElementById(\"__wtdl-global-data\");\n    if (global) {\n      global.dataset.wtdlOriginalTexts = JSON.stringify(this.#originalTexts);\n    }\n  }\n\n  #setupListeners() {\n    browser.runtime.onMessage.addListener(\n      async (request, sender, sendResponse) => {\n        if (!request) {\n          return;\n        }\n        switch (request.method) {\n          case \"translate\": {\n            this.#shouldProcessAfterScrolling = true;\n\n            await this.#translatePage(request);\n\n            once(\n              scrollDidStop(async () => {\n                if (this.#shouldProcessAfterScrolling) {\n                  await this.#translatePage({\n                    sourceLanguage: this.#sourceLanguage,\n                    targetLanguage: this.#targetLanguage,\n                  });\n                }\n              }, 500)\n            )();\n\n            sendResponse();\n            break;\n          }\n          case \"getContentState\": {\n            if (this.#isProcessing) {\n              sendResponse({ result: { isProcessing: this.#isProcessing } });\n            } else if (Object.keys(this.#originalTexts).length > 0) {\n              sendResponse({\n                result: {\n                  sourceLanguage: this.#sourceLanguage,\n                  targetLanguage: this.#targetLanguage,\n                  isShowingOriginal: this.#isShowingOriginal,\n                },\n              });\n            } else {\n              sendResponse(undefined);\n            }\n            break;\n          }\n          case \"showOriginal\": {\n            this.#shouldProcessAfterScrolling = false;\n            this.#isShowingOriginal = true;\n\n            const elements = document.querySelectorAll(\n              '[data-wtdl-translated=\"true\"]'\n            );\n            for (const element of elements) {\n              const uid = element.dataset.wtdlUid;\n              const originalText = this.#originalTexts[uid];\n              if (originalText === undefined) {\n                continue;\n              }\n              element.innerHTML = originalText;\n              element.dataset.wtdlTranslated = \"false\";\n            }\n            sendResponse();\n            break;\n          }\n          case \"startTranslateSelection\": {\n            const selection = window.getSelection();\n\n            let position = this.#getExistingPopoverPosition();\n            if (!position && selection.rangeCount) {\n              const textRange = selection.getRangeAt(0);\n              const selectionRect = textRange.getBoundingClientRect();\n\n              const x = selectionRect.left + window.scrollX;\n              const y = selectionRect.bottom + window.scrollY + 30;\n              position = { x, y };\n            }\n\n            const popover = this.#createPopover(position);\n            popover.setAttribute(\"loading\", true);\n\n            sendResponse();\n            break;\n          }\n          case \"finishTranslateSelection\": {\n            const result = request.result;\n            const popover = this.#getPopover();\n            if (popover) {\n              if (result.result && result.result.texts) {\n                const text = result.result.texts.map((t) => t.text).join(\"\\n\");\n                popover.setAttribute(\"result\", `${text}`);\n                popover.setAttribute(\"lang\", `${request.targetLanguage || \"\"}`);\n              } else {\n                if (result.error) {\n                  const message = browser.i18n.getMessage(\n                    \"error_message_generic_error\"\n                  );\n                  popover.setAttribute(\"error\", message);\n                } else {\n                  const message = browser.i18n.getMessage(\n                    \"error_message_generic_error\"\n                  );\n                  popover.setAttribute(\"error\", message);\n                }\n              }\n              popover.setAttribute(\"loading\", false);\n            }\n            sendResponse();\n            break;\n          }\n          case \"getSelection\": {\n            const selection = window.getSelection();\n            sendResponse({\n              result: selection ? selection.toString() : undefined,\n            });\n            break;\n          }\n          default: {\n            sendResponse();\n            break;\n          }\n        }\n      }\n    );\n\n    browser.storage.onChanged.addListener((changes, areaName) => {\n      if (areaName === \"local\" && \"selectedTargetLanguage\" in changes) {\n        const popover = this.#getPopover();\n        if (popover) {\n          popover.setAttribute(\"lang\", changes.selectedTargetLanguage.newValue);\n          browser.runtime.sendMessage({\n            method: \"translateSelection\",\n            selectionText: undefined,\n          });\n        }\n      }\n    });\n  }\n\n  #observeTextSelection() {\n    document.addEventListener(\"pointerup\", async (event) => {\n      event.preventDefault();\n\n      const selection = window.getSelection();\n      if (!selection.rangeCount) {\n        return;\n      }\n      let textRange = selection.getRangeAt(0).cloneRange();\n\n      const selectionText = selection ? selection.toString().trim() : \"\";\n      if (!selectionText && !selection.rangeCount) {\n        this.#removeTooltip();\n        return;\n      }\n\n      setTimeout(() => {\n        textRange = selection.rangeCount\n          ? selection.getRangeAt(0).cloneRange()\n          : textRange;\n        textRange.collapse(selection.anchorOffset > selection.focusOffset);\n        const selectionRect = textRange.getBoundingClientRect();\n\n        const x = selectionRect.right + window.scrollX - 20;\n        const y = selectionRect.bottom + window.scrollY + 40;\n\n        {\n          const selection = window.getSelection();\n          if (!selection || !selection.toString().trim()) {\n            this.#removeTooltip();\n            return;\n          }\n        }\n\n        browser.storage.local.get([\"settingsShowsIconForReading\"], (result) => {\n          const showsIconForReading =\n            (result.settingsShowsIconForReading === undefined &&\n              isTouchDevice()) ||\n            result.settingsShowsIconForReading;\n          if (showsIconForReading) {\n            const tooltip = this.#createTooltip({ x, y });\n            tooltip.addEventListener(\"tooltipClick\", (event) => {\n              event.preventDefault();\n              event.stopPropagation();\n\n              if (selectionText) {\n                browser.runtime.sendMessage({\n                  method: \"translateSelection\",\n                  selectionText,\n                });\n              }\n              tooltip.remove();\n\n              return false;\n            });\n          }\n        });\n      }, 100);\n    });\n  }\n\n  #createTooltip(position) {\n    const id = \"translate-button\";\n    {\n      const tooltip = document.getElementById(id);\n      if (tooltip) {\n        tooltip.remove();\n      }\n    }\n\n    document.body.insertAdjacentHTML(\n      \"beforeend\",\n      `<translate-button id=\"${id}\"></translate-button>`\n    );\n    const tooltip = document.getElementById(id);\n    tooltip.setAttribute(\"position\", JSON.stringify(position));\n\n    document.addEventListener(\n      \"touchstart\",\n      (event) => {\n        if (event.target.closest(id)) {\n          return;\n        }\n        tooltip.remove();\n      },\n      { once: true }\n    );\n\n    return tooltip;\n  }\n\n  #removeTooltip() {\n    const id = \"translate-button\";\n    const tooltip = document.getElementById(id);\n    if (tooltip) {\n      tooltip.remove();\n    }\n  }\n\n  #createToastProgress() {\n    const id = \"toast-progress\";\n    const toast = document.getElementById(id);\n    if (toast) {\n      toast.remove();\n    }\n\n    document.body.insertAdjacentHTML(\n      \"beforeend\",\n      `<toast-progress id=\"${id}\"></toast-progress>`\n    );\n    return document.getElementById(id);\n  }\n\n  #createToastError() {\n    const id = \"toast-error\";\n    const toast = document.getElementById(id);\n    if (toast) {\n      toast.remove();\n    }\n\n    document.body.insertAdjacentHTML(\n      \"beforeend\",\n      `<toast-error id=\"${id}\"></toast-error>`\n    );\n    return document.getElementById(id);\n  }\n\n  #createPopover(position) {\n    const id = \"translate-popover\";\n    {\n      const popover = document.getElementById(id);\n      if (popover) {\n        popover.remove();\n      }\n    }\n\n    document.body.insertAdjacentHTML(\n      \"beforeend\",\n      `<translate-popover id=\"${id}\"></translate-popover>`\n    );\n    const popover = document.getElementById(id);\n    popover.setAttribute(\"position\", JSON.stringify(position));\n    browser.storage.local.get([\"selectedTargetLanguage\"], (result) => {\n      if (result && result.selectedTargetLanguage) {\n        popover.setAttribute(\"lang\", result.selectedTargetLanguage);\n      }\n    });\n\n    const onClick = (event) => {\n      if (event.target.closest(id)) {\n        return;\n      }\n      popover.remove();\n      document.removeEventListener(\"click\", onClick);\n    };\n\n    document.addEventListener(\"click\", onClick);\n    popover.addEventListener(\"close\", async () => {\n      popover.remove();\n      document.removeEventListener(\"click\", onClick);\n    });\n    popover.addEventListener(\"change\", async (event) => {\n      await browser.storage.local.set({\n        selectedSourceLanguage: undefined,\n        selectedTargetLanguage: event.detail.selectedTargetLanguage,\n      });\n    });\n\n    return popover;\n  }\n\n  #getPopover() {\n    const id = \"translate-popover\";\n    return document.getElementById(id);\n  }\n\n  #getExistingPopoverPosition() {\n    const popover = this.#getPopover();\n    if (popover) {\n      const draggable = popover.shadowRoot.querySelector(\"#draggable\");\n      if (draggable) {\n        return {\n          x: draggable.offsetLeft,\n          y: draggable.offsetTop,\n        };\n      }\n    }\n    return undefined;\n  }\n\n  async #translatePage(request) {\n    const translatedElements = document.querySelectorAll(\n      '[data-wtdl-translated=\"false\"]'\n    );\n    if (this.#targetLanguage === request.targetLanguage) {\n      // Restore translated texts\n      for (const element of translatedElements) {\n        const uid = element.dataset.wtdlUid;\n        const translatedText = this.#translatedTexts[uid];\n        element.innerHTML = translatedText;\n        element.dataset.wtdlTranslated = \"true\";\n      }\n    }\n\n    const visibleElements = await collectVisibleElements();\n    if (visibleElements.length === 0) {\n      this.#cancelTranslation();\n      return;\n    }\n    this.#startTranslation();\n\n    const texts = visibleElements.map((element) => element.text);\n    const response = await browser.runtime.sendMessage({\n      method: \"translate\",\n      texts,\n      sourceLanguage: request.sourceLanguage,\n      targetLanguage: request.targetLanguage,\n    });\n\n    const handleError = (error) => {\n      const message =\n        error || browser.i18n.getMessage(\"error_message_generic_error\");\n      this.#abortTranslation(message);\n    };\n\n    if (!response || !response.result) {\n      handleError();\n      return;\n    }\n    const result = response.result.result;\n    if (result && result.texts) {\n      this.#sourceLanguage = result.lang;\n      this.#targetLanguage = request.targetLanguage;\n\n      const translatedTexts = result.texts;\n      if (translatedTexts.length === visibleElements.length) {\n        for (let i = 0; i < visibleElements.length; i++) {\n          const element = visibleElements[i].element;\n          const text = translatedTexts[i].text;\n          const uid = element.dataset.wtdlUid || this.#uid++;\n\n          if (element.dataset.wtdlOriginal !== \"true\") {\n            this.#originalTexts[uid] = element.innerHTML;\n          }\n          this.#translatedTexts[uid] = text;\n          element.innerHTML = text;\n\n          element.dataset.wtdlUid = `${uid}`;\n          element.dataset.wtdlOriginal = \"true\";\n          element.dataset.wtdlTranslated = \"true\";\n        }\n\n        this.#saveState();\n      }\n    } else if (response.result.error) {\n      const message =\n        response.result.error.code === 1045601\n          ? browser.i18n.getMessage(\"error_message_quota_has_been_reached\")\n          : response.result.error.message;\n      handleError(message);\n      return;\n    } else {\n      handleError();\n      return;\n    }\n\n    this.#finishTranslation();\n  }\n\n  #startTranslation() {\n    this.#toastProgress.setAttribute(\"show\", true);\n\n    this.#isProcessing = true;\n    this.#isShowingOriginal = false;\n\n    browser.runtime.sendMessage({\n      method: \"startTranslation\",\n    });\n  }\n\n  #cancelTranslation() {\n    this.#isShowingOriginal = false;\n\n    browser.runtime.sendMessage({\n      method: \"cancelTranslation\",\n      result: {\n        sourceLanguage: this.#sourceLanguage,\n        targetLanguage: this.#targetLanguage,\n      },\n    });\n  }\n\n  #abortTranslation(errorMessage) {\n    this.#isProcessing = false;\n    this.#isShowingOriginal = false;\n\n    this.#toastProgress.setAttribute(\"show\", false);\n    this.#toastError.setAttribute(\"show\", errorMessage);\n\n    browser.runtime.sendMessage({\n      method: \"abortTranslation\",\n      message: errorMessage,\n    });\n  }\n\n  #finishTranslation() {\n    this.#isProcessing = false;\n    this.#toastProgress.setAttribute(\"show\", false);\n\n    browser.runtime.sendMessage({\n      method: \"finishTranslation\",\n      result: {\n        sourceLanguage: this.#sourceLanguage,\n        targetLanguage: this.#targetLanguage,\n      },\n    });\n  }\n}\n\nasync function collectVisibleElements() {\n  const blockElements = [];\n\n  const children = document.body.children;\n  splitElements(children, blockElements);\n\n  const visibleElements = [];\n  for (const element of blockElements) {\n    const visible = isVisible(element);\n    if (\n      visible &&\n      (element.dataset.wtdlUid === undefined ||\n        element.dataset.wtdlTranslated === \"false\")\n    ) {\n      visibleElements.push({ element, text: element.innerHTML });\n    }\n  }\n\n  return visibleElements;\n}\n\nfunction splitElements(elements, storage) {\n  for (const element of elements) {\n    if (isHidden(element)) {\n      continue;\n    }\n    if (element.nodeName === \"NOSCRIPT\" || element.nodeName === \"svg\") {\n      continue;\n    }\n\n    const children = element.children;\n    const childNodes = Array.from(element.childNodes).filter((node) => {\n      if (node.nodeType === Node.COMMENT_NODE) {\n        return false;\n      }\n      if (node.nodeType === Node.TEXT_NODE) {\n        return node.nodeValue && node.nodeValue.trim();\n      }\n      return true;\n    });\n\n    if (hasTextNode(element)) {\n      if (childNodes.length === 1 && children.length > 0) {\n        splitElements(children, storage);\n      } else {\n        storage.push(element);\n      }\n      continue;\n    }\n    if (hasNoBlockElement(element)) {\n      if (childNodes.length === 1 && children.length > 0) {\n        splitElements(children, storage);\n      } else {\n        storage.push(element);\n      }\n      continue;\n    }\n\n    if (children.length === 0) {\n      continue;\n    }\n    splitElements(children, storage);\n  }\n}\n\nnew App();\n"],"names":["_createForOfIteratorHelper","o","allowArrayLike","it","Symbol","iterator","Array","isArray","minLen","_arrayLikeToArray","n","Object","prototype","toString","call","slice","constructor","name","from","test","_unsupportedIterableToArray","length","i","F","s","done","value","e","_e","f","TypeError","err","normalCompletion","didErr","step","next","_e2","arr","len","arr2","isVisible","element","rect","getBoundingClientRect","top","window","innerHeight","left","innerWidth","isHidden","getComputedStyle","display","textContent","trim","hasTextNode","childNodes","_step","_iterator","child","nodeType","Node","TEXT_NODE","nodeValue","hasNoBlockElement","children","every","tagName","scrollDidStop","callback","isScrolling","refresh","arguments","undefined","addEventListener","event","clearTimeout","setTimeout","once","passive","capture","fn","context","result","apply","this","_typeof","_regeneratorRuntime","t","r","hasOwnProperty","defineProperty","a","c","asyncIterator","u","toStringTag","define","enumerable","configurable","writable","wrap","Generator","create","Context","makeInvokeMethod","tryCatch","type","arg","h","l","y","GeneratorFunction","GeneratorFunctionPrototype","p","d","getPrototypeOf","v","values","g","defineIteratorMethods","forEach","_invoke","AsyncIterator","invoke","resolve","__await","then","callInvokeWithMethodAndArg","Error","method","delegate","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","resultName","nextLoc","pushTryEntry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","push","resetTryEntry","completion","reset","isNaN","displayName","isGeneratorFunction","mark","setPrototypeOf","__proto__","awrap","async","Promise","keys","reverse","pop","prev","charAt","stop","rval","handle","complete","finish","delegateYield","asyncGeneratorStep","gen","reject","_next","_throw","key","info","error","_asyncToGenerator","self","args","_defineProperties","target","props","descriptor","_toPropertyKey","_createClass","Constructor","protoProps","staticProps","toPrimitive","String","Number","_toPrimitive","_classPrivateMethodInitSpec","obj","privateSet","_checkPrivateRedeclaration","add","_classPrivateFieldInitSpec","privateMap","set","privateCollection","has","_classPrivateFieldGet2","receiver","get","_classApplyDescriptorGet","_classPrivateFieldGet","_classPrivateFieldSet","_classApplyDescriptorSet","_assertClassBrand","_classPrivateMethodGet","_uid","WeakMap","_sourceLanguage","_targetLanguage","_originalTexts","_translatedTexts","_toastProgress","_toastError","_isProcessing","_shouldProcessAfterScrolling","_isShowingOriginal","_init","WeakSet","_restoreState","_saveState","_setupListeners","_observeTextSelection","_createTooltip","_removeTooltip","_createToastProgress","_createToastError","_createPopover","_getPopover","_getExistingPopoverPosition","_translatePage","_startTranslation","_cancelTranslation","_abortTranslation","_finishTranslation","_init2","link","document","createElement","setAttribute","browser","runtime","getURL","head","appendChild","_restoreState2","popover","_getPopover2","remove","tooltip","getElementById","_createToastProgress2","_createToastError2","_setupListeners2","_observeTextSelection2","id","global","dataset","wtdlOriginalTexts","JSON","parse","body","insertAdjacentHTML","concat","style","_saveState2","stringify","_this","onMessage","addListener","_ref","_callee2","request","sender","sendResponse","elements","_iterator2","_step2","uid","originalText","selection","position","textRange","selectionRect","x","_popover","text","message","_message","_selection","_context2","t0","_translatePage2","_callee","_context","sourceLanguage","targetLanguage","isProcessing","isShowingOriginal","querySelectorAll","wtdlUid","innerHTML","wtdlTranslated","t1","getSelection","_getExistingPopoverPosition2","rangeCount","getRangeAt","scrollX","bottom","scrollY","_createPopover2","texts","map","join","i18n","getMessage","_x","_x2","_x3","storage","onChanged","changes","areaName","selectedTargetLanguage","newValue","sendMessage","selectionText","_this2","_ref3","_callee3","_context3","preventDefault","cloneRange","_removeTooltip2","collapse","anchorOffset","focusOffset","right","local","settingsShowsIconForReading","navigator","maxTouchPoints","msMaxTouchPoints","_createTooltip2","stopPropagation","_x4","closest","toast","onClick","removeEventListener","_callee4","_context4","_ref5","_callee5","_context5","selectedSourceLanguage","detail","_x5","draggable","shadowRoot","querySelector","offsetLeft","offsetTop","_x6","_translatePage3","_callee7","translatedElements","_iterator3","_step3","translatedText","visibleElements","response","handleError","translatedTexts","_this$uid","_this$uid2","_element","_uid2","_this3","_context7","collectVisibleElements","_cancelTranslation2","_startTranslation2","_abortTranslation2","lang","wtdlOriginal","code","_finishTranslation2","errorMessage","_collectVisibleElements","_callee6","blockElements","_i","_blockElements","_context6","splitElements","nodeName","filter","node","COMMENT_NODE","App","instance","_classCallCheck"],"sourceRoot":""}