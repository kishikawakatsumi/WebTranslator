(()=>{var t={812:(t,e,n)=>{"use strict";n.d(e,{Z:()=>i});var a=n(81),o=n.n(a),s=n(645),r=n.n(s)()(o());r.push([t.id,".snackbar-container{transition:all .5s ease;transition-property:top,right,bottom,left,opacity;font-family:Roboto,sans-serif;font-size:14px;min-height:14px;background-color:#070b0e;position:fixed;display:flex;justify-content:space-between;align-items:center;color:#fff;line-height:22px;padding:18px 24px;bottom:-100px;top:-100px;opacity:0;z-index:9999}.snackbar-container .action{background:inherit;display:inline-block;border:none;font-size:inherit;text-transform:uppercase;color:#4caf50;margin:0 0 0 24px;padding:0;min-width:min-content;cursor:pointer}@media (min-width:640px){.snackbar-container{min-width:288px;max-width:568px;display:inline-flex;border-radius:2px;margin:24px}}@media (max-width:640px){.snackbar-container{left:0;right:0;width:100%}}.snackbar-pos.bottom-center{top:auto!important;bottom:0;left:50%;transform:translate(-50%,0)}.snackbar-pos.bottom-left{top:auto!important;bottom:0;left:0}.snackbar-pos.bottom-right{top:auto!important;bottom:0;right:0}.snackbar-pos.top-left{bottom:auto!important;top:0;left:0}.snackbar-pos.top-center{bottom:auto!important;top:0;left:50%;transform:translate(-50%,0)}.snackbar-pos.top-right{bottom:auto!important;top:0;right:0}@media (max-width:640px){.snackbar-pos.bottom-center,.snackbar-pos.top-center{left:0;transform:none}}",""]);const i=r},645:t=>{"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n="",a=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),a&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),a&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n})).join("")},e.i=function(t,n,a,o,s){"string"==typeof t&&(t=[[null,t,void 0]]);var r={};if(a)for(var i=0;i<this.length;i++){var c=this[i][0];null!=c&&(r[c]=!0)}for(var l=0;l<t.length;l++){var d=[].concat(t[l]);a&&r[d[0]]||(void 0!==s&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=s),n&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=n):d[2]=n),o&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=o):d[4]="".concat(o)),e.push(d))}},e}},81:t=>{"use strict";t.exports=function(t){return t[1]}},52:function(t,e){var n;
/*!
 * Snackbar v0.1.14
 * http://polonel.com/Snackbar
 *
 * Copyright 2018 Chris Brame and other contributors
 * Released under the MIT license
 * https://github.com/polonel/Snackbar/blob/master/LICENSE
 */!function(a,o){"use strict";n=function(){return a.Snackbar=function(){var t={current:null},e={text:"Default Text",textColor:"#FFFFFF",width:"auto",showAction:!0,actionText:"Dismiss",actionTextAria:"Dismiss, Description for Screen Readers",alertScreenReader:!1,actionTextColor:"#4CAF50",showSecondButton:!1,secondButtonText:"",secondButtonAria:"Description for Screen Readers",secondButtonTextColor:"#4CAF50",backgroundColor:"#323232",pos:"bottom-left",duration:5e3,customClass:"",onActionClick:function(t){t.style.opacity=0},onSecondButtonClick:function(t){},onClose:function(t){}};t.show=function(a){var o=n(!0,e,a);t.current&&(t.current.style.opacity=0,setTimeout(function(){var t=this.parentElement;t&&t.removeChild(this)}.bind(t.current),500)),t.snackbar=document.createElement("div"),t.snackbar.className="snackbar-container "+o.customClass,t.snackbar.style.width=o.width;var s=document.createElement("p");if(s.style.margin=0,s.style.padding=0,s.style.color=o.textColor,s.style.fontSize="14px",s.style.fontWeight=300,s.style.lineHeight="1em",s.innerHTML=o.text,t.snackbar.appendChild(s),t.snackbar.style.background=o.backgroundColor,o.showSecondButton){var r=document.createElement("button");r.className="action",r.innerHTML=o.secondButtonText,r.setAttribute("aria-label",o.secondButtonAria),r.style.color=o.secondButtonTextColor,r.addEventListener("click",(function(){o.onSecondButtonClick(t.snackbar)})),t.snackbar.appendChild(r)}if(o.showAction){var i=document.createElement("button");i.className="action",i.innerHTML=o.actionText,i.setAttribute("aria-label",o.actionTextAria),i.style.color=o.actionTextColor,i.addEventListener("click",(function(){o.onActionClick(t.snackbar)})),t.snackbar.appendChild(i)}o.duration&&setTimeout(function(){t.current===this&&(t.current.style.opacity=0,t.current.style.top="-100px",t.current.style.bottom="-100px")}.bind(t.snackbar),o.duration),o.alertScreenReader&&t.snackbar.setAttribute("role","alert"),t.snackbar.addEventListener("transitionend",function(e,n){"opacity"===e.propertyName&&"0"===this.style.opacity&&("function"==typeof o.onClose&&o.onClose(this),this.parentElement.removeChild(this),t.current===this&&(t.current=null))}.bind(t.snackbar)),t.current=t.snackbar,document.body.appendChild(t.snackbar),getComputedStyle(t.snackbar).bottom,getComputedStyle(t.snackbar).top,t.snackbar.style.opacity=1,t.snackbar.className="snackbar-container "+o.customClass+" snackbar-pos "+o.pos},t.close=function(){t.current&&(t.current.style.opacity=0)};var n=function(){var t={},e=!1,a=0,o=arguments.length;"[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(e=arguments[0],a++);for(var s=function(a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e&&"[object Object]"===Object.prototype.toString.call(a[o])?t[o]=n(!0,t[o],a[o]):t[o]=a[o])};a<o;a++){s(arguments[a])}return t};return t}()}.apply(e,[]),void 0===n||(t.exports=n)}(this)},379:t=>{"use strict";var e=[];function n(t){for(var n=-1,a=0;a<e.length;a++)if(e[a].identifier===t){n=a;break}return n}function a(t,a){for(var s={},r=[],i=0;i<t.length;i++){var c=t[i],l=a.base?c[0]+a.base:c[0],d=s[l]||0,u="".concat(l," ").concat(d);s[l]=d+1;var h=n(u),g={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==h)e[h].references++,e[h].updater(g);else{var p=o(g,a);a.byIndex=i,e.splice(i,0,{identifier:u,updater:p,references:1})}r.push(u)}return r}function o(t,e){var n=e.domAPI(e);n.update(t);return function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;n.update(t=e)}else n.remove()}}t.exports=function(t,o){var s=a(t=t||[],o=o||{});return function(t){t=t||[];for(var r=0;r<s.length;r++){var i=n(s[r]);e[i].references--}for(var c=a(t,o),l=0;l<s.length;l++){var d=n(s[l]);0===e[d].references&&(e[d].updater(),e.splice(d,1))}s=c}}},569:t=>{"use strict";var e={};t.exports=function(t,n){var a=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(n)}},216:t=>{"use strict";t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},565:(t,e,n)=>{"use strict";t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},795:t=>{"use strict";t.exports=function(t){var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var a="";n.supports&&(a+="@supports (".concat(n.supports,") {")),n.media&&(a+="@media ".concat(n.media," {"));var o=void 0!==n.layer;o&&(a+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),a+=n.css,o&&(a+="}"),n.media&&(a+="}"),n.supports&&(a+="}");var s=n.sourceMap;s&&"undefined"!=typeof btoa&&(a+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),e.styleTagTransform(a,t,e.options)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},589:t=>{"use strict";t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}}},e={};function n(a){var o=e[a];if(void 0!==o)return o.exports;var s=e[a]={id:a,exports:{}};return t[a].call(s.exports,s,s.exports,n),s.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var a in e)n.o(e,a)&&!n.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.nc=void 0,(()=>{"use strict";var t=n(379),e=n.n(t),a=n(795),o=n.n(a),s=n(569),r=n.n(s),i=n(565),c=n.n(i),l=n(216),d=n.n(l),u=n(589),h=n.n(u),g=n(812),p={};p.styleTagTransform=h(),p.setAttributes=c(),p.insert=r().bind(null,"head"),p.domAPI=o(),p.insertStyleElement=d();e()(g.Z,p);g.Z&&g.Z.locals&&g.Z.locals;var m=n(52),f=n.n(m);const v=[{code:"DE",name:"German"},{code:"EN",name:"English"},{code:"FR",name:"French"},{code:"ES",name:"Spanish"},{code:"IT",name:"Italian"},{code:"ID",name:"Indonesian"},{code:"PL",name:"Polish"},{code:"NL",name:"Dutch"},{code:"PT",name:"Portuguese"},{code:"RU",name:"Russian"},{code:"ZH",name:"Chinese"},{code:"JA",name:"Japanese"},{code:"BG",name:"Bulgarian"},{code:"CS",name:"Czech"},{code:"DA",name:"Danish"},{code:"ET",name:"Estonian"},{code:"FI",name:"Finnish"},{code:"EL",name:"Greek"},{code:"HU",name:"Hungarian"},{code:"LV",name:"Latvian"},{code:"LT",name:"Lithuanian"},{code:"RO",name:"Romanian"},{code:"SK",name:"Slovak"},{code:"SL",name:"Slovenian"},{code:"SV",name:"Swedish"},{code:"TR",name:"Turkish"}];function b(t){return new Promise((e=>{const n=new IntersectionObserver((([t])=>{e(1===t.intersectionRatio),n.disconnect()}));n.observe(t)}))}function y(t){const e=t.childNodes;return 0!==e.length&&(e[0].nodeType===Node.TEXT_NODE&&""!==e[0].nodeValue.trim())}function w(t){const e=t.children;if(!e||0===e.length)return!1;for(const t of e){const e=getComputedStyle(t).display;if("inline"===e||"inline-block"===e)return!0}}class x extends HTMLElement{#t;#e;#n;#a;#o;constructor(){super(),this.shadow=this.attachShadow({mode:"open"});const t=browser.runtime.getURL("assets/content.css");this.shadowRoot.innerHTML=`<link rel="stylesheet" href="${t}">`;const e=document.createElement("div");e.innerHTML='<style>\n  .translate-popover {\n    position: absolute;\n    border-radius: 5px;\n    box-shadow: 0px 2px 16px rgba(0, 0, 0, 0.16);\n  }\n  .title-bar {\n    height: 1rem;\n  }\n  .drag-handle {\n    background-image: url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'0 0 70 6\'%3E%3Cpath fill=\'%233f4145\' d=\'M8 0h2v2H8zm8 0h2v2h-2zm8 0h2v2h-2zM12 0h2v2h-2zm8 0h2v2h-2zm8 0h2v2h-2zM8 4h2v2H8zm8 0h2v2h-2zm8 0h2v2h-2zM12 4h2v2h-2zm8 0h2v2h-2zm8 0h2v2h-2zM0 0h2v2H0zm4 0h2v2H4zM0 4h2v2H0zm4 0h2v2H4zm36-4h2v2h-2zm4 0h2v2h-2zm-4 4h2v2h-2zm4 0h2v2h-2zM32 0h2v2h-2zm4 0h2v2h-2zm-4 4h2v2h-2zm4 0h2v2h-2zm20-4h2v2h-2zm8 0h2v2h-2zm-4 0h2v2h-2zm8 0h2v2h-2zM56 4h2v2h-2zm8 0h2v2h-2zm-4 0h2v2h-2zm8 0h2v2h-2zM48 0h2v2h-2zm4 0h2v2h-2zm-4 4h2v2h-2zm4 0h2v2h-2z\'/%3E%3C/svg%3E");\n    background-repeat: no-repeat;\n    content: "";\n    display: block;\n    position: absolute;\n    height: 1rem;\n    width: 4.375rem;\n    left: calc(50% - 2.1875rem);\n    top: .5rem;\n  }\n  .close-button {\n    position: absolute;\n    right: 0;\n    top: 0;\n  }\n  .translate-content {\n    padding: 0.8rem;\n  }\n  #result {\n    max-height: 300px;\n    overflow: auto;\n    line-height: 1.6em;\n  }\n</style>\n\n<div class="translate-popover card" id="draggable" style="width: 550px;">\n  <button class="close-button btn btn-clear btn-lg m-1" id="close-button"></button>\n  <div class="title-bar c-move" id="dragzone">\n    <div class="drag-handle"></div>\n  </div>\n  <div class="translate-content">\n    <div class="input-group">\n      <label class="form-label pr-1 text-small" for="language-select" id="language-select-label">Translate to:</label>\n      <select class="form-select select-sm m-1 px-2" id="language-select" style="font-size: 0.9em;">\n      </select>\n    </div>\n    <div class="divider"></div>\n    <div class="py-2">\n      <div class="loading loading-lg" id="spinner"></div>\n      <div class="text-small d-none" id="result"></div>\n    </div>\n  </div>\n</div>',this.shadow.append(e),this.#t=this.shadowRoot.getElementById("draggable");const n=this.shadowRoot.getElementById("dragzone");!function(t,e){let n=0,a=0,o=0,s=0;const r=e=>{e.preventDefault(),n=o-e.clientX,a=s-e.clientY,o=e.clientX,s=e.clientY,t.style.top=t.offsetTop-a+"px",t.style.left=t.offsetLeft-n+"px"},i=()=>{document.onmouseup=null,document.onmousemove=null,t.classList.remove("drag")};e.onmousedown=t=>{t.preventDefault(),o=t.clientX,s=t.clientY,document.onmouseup=i,document.onmousemove=r}}(this.#t,n),this.#e=this.shadowRoot.querySelector("#close-button"),this.#e.addEventListener("click",(()=>{this.dispatchEvent(new CustomEvent("close"))})),this.#a=this.shadowRoot.getElementById("result"),this.#o=this.shadowRoot.getElementById("spinner");this.shadowRoot.getElementById("language-select-label").textContent=browser.i18n.getMessage("layout_header_label_language_switch");const a=browser.i18n.getUILanguage().split("-").shift().toUpperCase();this.#n=this.shadowRoot.getElementById("language-select");for(const t of v){const e=new Option(browser.i18n.getMessage(`supported_languages_${t.code}`),t.code,!1,t.code===a);this.#n.add(e)}this.#n.addEventListener("change",this.#s.bind(this)),browser.storage.local.get(["selectedTargetLanguage"],(t=>{this.#r(t.selectedTargetLanguage)}))}static get observedAttributes(){return["loading","position","result","error"]}attributeChangedCallback(t,e,n){switch(t){case"loading":this.#i("true"===n);break;case"position":const{x:t,y:e}=JSON.parse(n);this.#c(t,e);break;case"result":this.#a.innerHTML=function(t){const e=document.createElement("div");return e.textContent=t,e.innerHTML}(n).split("\n").join("<br>");break;case"error":this.#a.innerHTML=`<span class="text-error">${n}</span>`}}on(t,e){this.addEventListener(t,e)}#r(t){t&&v.some((e=>e.code===t.toUpperCase()))&&(this.#n.value=t)}#c(t,e){this.#t.style.top=`${e}px`,this.#t.style.left=`${t}px`}#i(t){t?(this.#o.classList.remove("d-none"),this.#a.classList.add("d-none")):(this.#o.classList.add("d-none"),this.#a.classList.remove("d-none"))}#s(t){this.dispatchEvent(new CustomEvent("change",{detail:{selectedSourceLanguage:void 0,selectedTargetLanguage:this.#n.value}}))}}const k=browser.i18n.getMessage("full_page_translation_ongoing_translation");new class{#l=1;#d=void 0;#u=void 0;#h={};#g={};#p=!1;#m=!1;#f=!1;#v=[];constructor(){this.#b()}#b(){window.customElements.get("translate-popover")||window.customElements.define("translate-popover",x),this.#y()}#y(){browser.runtime.onMessage.addListener((async(t,e,n)=>{if(t)switch(t.method){case"translate":this.#m=!0,await this.#w(t),function(t,e){let n;return function(){return t&&(n=t.apply(e||this,arguments),t=void 0),n}}(function(t,e=200){if(!t||"function"!=typeof t)return;let n;window.addEventListener("scroll",(function(a){window.clearTimeout(n),n=setTimeout(t,e)}),!0)}((async()=>{const t=function(t,e=250){let n;return(...a)=>{clearTimeout(n),n=setTimeout((()=>{t(...a)}),e)}}((async()=>{await this.#w({sourceLanguage:this.#d,targetLanguage:this.#u})}),250);this.#m&&t()})))(),n();break;case"getContentState":this.#p?n({result:{isProcessing:this.#p}}):Object.keys(this.#h).length>0?n({result:{sourceLanguage:this.#d,targetLanguage:this.#u,isShowingOriginal:this.#f}}):n(void 0);break;case"showOriginal":{this.#m=!1,this.#f=!0;const t=document.querySelectorAll('[data-wtdl-translated="true"]');for(const e of t){const t=e.dataset.wtdlUid,n=this.#h[t];e.innerHTML=n,e.dataset.wtdlTranslated="false"}n();break}case"startTranslateSelection":{const t=window.getSelection().getRangeAt(0).getBoundingClientRect();this.#x({x:t.x,y:t.bottom+window.pageYOffset+30}).setAttribute("loading",!0),n();break}case"finishTranslateSelection":{const e=t.result,a=document.getElementById("translate-popover");if(a){if(e.result&&e.result.texts){const t=e.result.texts.map((t=>t.text)).join("\n");a.setAttribute("result",`${t}`)}else if(e.error){const t=browser.i18n.getMessage("error_message_generic_error");a.setAttribute("error",t)}else{const t=browser.i18n.getMessage("error_message_generic_error");a.setAttribute("error",t)}a.setAttribute("loading",!1)}n();break}default:n()}}))}#x(t){const e="translate-popover",n=document.getElementById(e);if(n)return n;{document.body.insertAdjacentHTML("beforeend",`<translate-popover id="${e}"></translate-popover>`);const n=document.getElementById(e),a=t=>{t.target.closest(e)||(n.remove(),document.removeEventListener("click",a))};return document.addEventListener("click",a),n.on("close",(async()=>{n.remove(),document.removeEventListener("click",a)})),n.on("change",(async t=>{await chrome.storage.local.set(t.detail);const e={method:"translateSelection",selectionText:t.detail.selectionText};browser.runtime.sendMessage(e)})),n.setAttribute("position",JSON.stringify(t)),n}}async#w(t){this.#k();const e=document.querySelectorAll('[data-wtdl-translated="false"]');if(this.#u===t.targetLanguage)for(const t of e){const e=t.dataset.wtdlUid,n=this.#g[e];t.innerHTML=n,t.dataset.wtdlTranslated="true"}const n=await async function(){const t=[];L(document.body.children,t);const e=[];for(const n of t){!await b(n)||void 0!==n.dataset.wtdlUid&&"false"!==n.dataset.wtdlTranslated||n.parentElement.classList.contains("snackbar-container")||e.push({element:n,text:n.innerHTML})}return e}();if(n.length>0){const e=n.map((t=>t.text)),a=await browser.runtime.sendMessage({method:"translate",texts:e,sourceLanguage:t.sourceLanguage,targetLanguage:t.targetLanguage});if(a&&a.result){const e=a.result.result;if(e&&e.texts){this.#d=e.lang,this.#u=t.targetLanguage;const a=e.texts;if(a.length===n.length)for(let t=0;t<n.length;t++){const e=n[t].element,o=a[t].text,s=e.dataset.wtdlUid||this.#l++;"true"!==e.dataset.wtdlOriginal&&(this.#h[s]=e.innerHTML),this.#g[s]=o,e.innerHTML=o,e.dataset.wtdlUid=`${s}`,e.dataset.wtdlOriginal="true",e.dataset.wtdlTranslated="true"}}}}this.#L()}#k(){0===this.#v.length&&f().show({text:`<svg width="24" height="24" fill="#fff" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M10.72,19.9a8,8,0,0,1-6.5-9.79A7.77,7.77,0,0,1,10.4,4.16a8,8,0,0,1,9.49,6.52A1.54,1.54,0,0,0,21.38,12h.13a1.37,1.37,0,0,0,1.38-1.54,11,11,0,1,0-12.7,12.39A1.54,1.54,0,0,0,12,21.34h0A1.47,1.47,0,0,0,10.72,19.9Z"><animateTransform attributeName="transform" type="rotate" dur="0.75s" values="0 12 12;360 12 12" repeatCount="indefinite"/></path></svg><span style="line-height: 24px; vertical-align: top; padding: 0 12px 0 12px; font-size: 1.2em;">${k}...</span>`,actionText:'<span style="line-height: 14px; font-size: 1.8em;">×</span>',actionTextColor:"#fff",pos:"bottom-center",duration:void 0}),this.#v.push(!0),this.#p=!0,this.#f=!1,browser.runtime.sendMessage({method:"startTranslation"})}#L(){this.#p=!1,browser.runtime.sendMessage({method:"finishTranslation",result:{sourceLanguage:this.#d,targetLanguage:this.#u}}),1===this.#v.length&&f().close(),this.#v.pop()}};function L(t,e){for(const n of t)if((y(n)||w(n))&&n.clientHeight<window.innerHeight)e.push(n);else{const t=n.children;if(!t||0===t.length)continue;L(n.children,e)}}})()})();