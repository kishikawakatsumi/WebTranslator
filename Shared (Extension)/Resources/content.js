(()=>{var e={812:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var a=n(81),s=n.n(a),o=n(645),r=n.n(o)()(s());r.push([e.id,".snackbar-container{transition:all .5s ease;transition-property:top,right,bottom,left,opacity;font-family:Roboto,sans-serif;font-size:14px;min-height:14px;background-color:#070b0e;position:fixed;display:flex;justify-content:space-between;align-items:center;color:#fff;line-height:22px;padding:18px 24px;bottom:-100px;top:-100px;opacity:0;z-index:9999}.snackbar-container .action{background:inherit;display:inline-block;border:none;font-size:inherit;text-transform:uppercase;color:#4caf50;margin:0 0 0 24px;padding:0;min-width:min-content;cursor:pointer}@media (min-width:640px){.snackbar-container{min-width:288px;max-width:568px;display:inline-flex;border-radius:2px;margin:24px}}@media (max-width:640px){.snackbar-container{left:0;right:0;width:100%}}.snackbar-pos.bottom-center{top:auto!important;bottom:0;left:50%;transform:translate(-50%,0)}.snackbar-pos.bottom-left{top:auto!important;bottom:0;left:0}.snackbar-pos.bottom-right{top:auto!important;bottom:0;right:0}.snackbar-pos.top-left{bottom:auto!important;top:0;left:0}.snackbar-pos.top-center{bottom:auto!important;top:0;left:50%;transform:translate(-50%,0)}.snackbar-pos.top-right{bottom:auto!important;top:0;right:0}@media (max-width:640px){.snackbar-pos.bottom-center,.snackbar-pos.top-center{left:0;transform:none}}",""]);const i=r},645:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",a=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),a&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),a&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,a,s,o){"string"==typeof e&&(e=[[null,e,void 0]]);var r={};if(a)for(var i=0;i<this.length;i++){var c=this[i][0];null!=c&&(r[c]=!0)}for(var l=0;l<e.length;l++){var d=[].concat(e[l]);a&&r[d[0]]||(void 0!==o&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=o),n&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=n):d[2]=n),s&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=s):d[4]="".concat(s)),t.push(d))}},t}},81:e=>{"use strict";e.exports=function(e){return e[1]}},52:function(e,t){var n;
/*!
 * Snackbar v0.1.14
 * http://polonel.com/Snackbar
 *
 * Copyright 2018 Chris Brame and other contributors
 * Released under the MIT license
 * https://github.com/polonel/Snackbar/blob/master/LICENSE
 */!function(a,s){"use strict";n=function(){return a.Snackbar=function(){var e={current:null},t={text:"Default Text",textColor:"#FFFFFF",width:"auto",showAction:!0,actionText:"Dismiss",actionTextAria:"Dismiss, Description for Screen Readers",alertScreenReader:!1,actionTextColor:"#4CAF50",showSecondButton:!1,secondButtonText:"",secondButtonAria:"Description for Screen Readers",secondButtonTextColor:"#4CAF50",backgroundColor:"#323232",pos:"bottom-left",duration:5e3,customClass:"",onActionClick:function(e){e.style.opacity=0},onSecondButtonClick:function(e){},onClose:function(e){}};e.show=function(a){var s=n(!0,t,a);e.current&&(e.current.style.opacity=0,setTimeout(function(){var e=this.parentElement;e&&e.removeChild(this)}.bind(e.current),500)),e.snackbar=document.createElement("div"),e.snackbar.className="snackbar-container "+s.customClass,e.snackbar.style.width=s.width;var o=document.createElement("p");if(o.style.margin=0,o.style.padding=0,o.style.color=s.textColor,o.style.fontSize="14px",o.style.fontWeight=300,o.style.lineHeight="1em",o.innerHTML=s.text,e.snackbar.appendChild(o),e.snackbar.style.background=s.backgroundColor,s.showSecondButton){var r=document.createElement("button");r.className="action",r.innerHTML=s.secondButtonText,r.setAttribute("aria-label",s.secondButtonAria),r.style.color=s.secondButtonTextColor,r.addEventListener("click",(function(){s.onSecondButtonClick(e.snackbar)})),e.snackbar.appendChild(r)}if(s.showAction){var i=document.createElement("button");i.className="action",i.innerHTML=s.actionText,i.setAttribute("aria-label",s.actionTextAria),i.style.color=s.actionTextColor,i.addEventListener("click",(function(){s.onActionClick(e.snackbar)})),e.snackbar.appendChild(i)}s.duration&&setTimeout(function(){e.current===this&&(e.current.style.opacity=0,e.current.style.top="-100px",e.current.style.bottom="-100px")}.bind(e.snackbar),s.duration),s.alertScreenReader&&e.snackbar.setAttribute("role","alert"),e.snackbar.addEventListener("transitionend",function(t,n){"opacity"===t.propertyName&&"0"===this.style.opacity&&("function"==typeof s.onClose&&s.onClose(this),this.parentElement.removeChild(this),e.current===this&&(e.current=null))}.bind(e.snackbar)),e.current=e.snackbar,document.body.appendChild(e.snackbar),getComputedStyle(e.snackbar).bottom,getComputedStyle(e.snackbar).top,e.snackbar.style.opacity=1,e.snackbar.className="snackbar-container "+s.customClass+" snackbar-pos "+s.pos},e.close=function(){e.current&&(e.current.style.opacity=0)};var n=function(){var e={},t=!1,a=0,s=arguments.length;"[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(t=arguments[0],a++);for(var o=function(a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t&&"[object Object]"===Object.prototype.toString.call(a[s])?e[s]=n(!0,e[s],a[s]):e[s]=a[s])};a<s;a++){o(arguments[a])}return e};return e}()}.apply(t,[]),void 0===n||(e.exports=n)}(this)},379:e=>{"use strict";var t=[];function n(e){for(var n=-1,a=0;a<t.length;a++)if(t[a].identifier===e){n=a;break}return n}function a(e,a){for(var o={},r=[],i=0;i<e.length;i++){var c=e[i],l=a.base?c[0]+a.base:c[0],d=o[l]||0,u="".concat(l," ").concat(d);o[l]=d+1;var h=n(u),g={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==h)t[h].references++,t[h].updater(g);else{var p=s(g,a);a.byIndex=i,t.splice(i,0,{identifier:u,updater:p,references:1})}r.push(u)}return r}function s(e,t){var n=t.domAPI(t);n.update(e);return function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,s){var o=a(e=e||[],s=s||{});return function(e){e=e||[];for(var r=0;r<o.length;r++){var i=n(o[r]);t[i].references--}for(var c=a(e,s),l=0;l<o.length;l++){var d=n(o[l]);0===t[d].references&&(t[d].updater(),t.splice(d,1))}o=c}}},569:e=>{"use strict";var t={};e.exports=function(e,n){var a=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(n)}},216:e=>{"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},565:(e,t,n)=>{"use strict";e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},795:e=>{"use strict";e.exports=function(e){var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var a="";n.supports&&(a+="@supports (".concat(n.supports,") {")),n.media&&(a+="@media ".concat(n.media," {"));var s=void 0!==n.layer;s&&(a+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),a+=n.css,s&&(a+="}"),n.media&&(a+="}"),n.supports&&(a+="}");var o=n.sourceMap;o&&"undefined"!=typeof btoa&&(a+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),t.styleTagTransform(a,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},589:e=>{"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}}},t={};function n(a){var s=t[a];if(void 0!==s)return s.exports;var o=t[a]={id:a,exports:{}};return e[a].call(o.exports,o,o.exports,n),o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.nc=void 0,(()=>{"use strict";var e=n(379),t=n.n(e),a=n(795),s=n.n(a),o=n(569),r=n.n(o),i=n(565),c=n.n(i),l=n(216),d=n.n(l),u=n(589),h=n.n(u),g=n(812),p={};p.styleTagTransform=h(),p.setAttributes=c(),p.insert=r().bind(null,"head"),p.domAPI=s(),p.insertStyleElement=d();t()(g.Z,p);g.Z&&g.Z.locals&&g.Z.locals;var m=n(52),f=n.n(m);const v=[{code:"DE",name:"German"},{code:"EN",name:"English"},{code:"FR",name:"French"},{code:"ES",name:"Spanish"},{code:"IT",name:"Italian"},{code:"ID",name:"Indonesian"},{code:"PL",name:"Polish"},{code:"NL",name:"Dutch"},{code:"PT",name:"Portuguese"},{code:"RU",name:"Russian"},{code:"ZH",name:"Chinese"},{code:"JA",name:"Japanese"},{code:"BG",name:"Bulgarian"},{code:"CS",name:"Czech"},{code:"DA",name:"Danish"},{code:"ET",name:"Estonian"},{code:"FI",name:"Finnish"},{code:"EL",name:"Greek"},{code:"HU",name:"Hungarian"},{code:"LV",name:"Latvian"},{code:"LT",name:"Lithuanian"},{code:"RO",name:"Romanian"},{code:"SK",name:"Slovak"},{code:"SL",name:"Slovenian"},{code:"SV",name:"Swedish"},{code:"TR",name:"Turkish"}];function b(e){return new Promise((t=>{const n=new IntersectionObserver((([e])=>{t(1===e.intersectionRatio),n.disconnect()}));n.observe(e)}))}function w(e){const t=e.childNodes;return 0!==t.length&&(t[0].nodeType===Node.TEXT_NODE&&""!==t[0].nodeValue.trim())}function y(e){const t=e.children;if(!t||0===t.length)return!1;for(const e of t){const t=getComputedStyle(e).display;if("inline"===t||"inline-block"===t)return!0}}class x extends HTMLElement{#e;#t;#n;#a;#s;constructor(){super(),this.shadow=this.attachShadow({mode:"open"});const e=browser.runtime.getURL("assets/content.css");this.shadowRoot.innerHTML=`<link rel="stylesheet" href="${e}">`;const t=document.createElement("div");t.innerHTML='<style>\n  .translate-popover {\n    position: absolute;\n    border-radius: 5px;\n    box-shadow: 0px 2px 16px rgba(0, 0, 0, 0.16);\n  }\n  .title-bar {\n    height: 1rem;\n  }\n  .drag-handle {\n    background-image: url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'0 0 70 6\'%3E%3Cpath fill=\'%233f4145\' d=\'M8 0h2v2H8zm8 0h2v2h-2zm8 0h2v2h-2zM12 0h2v2h-2zm8 0h2v2h-2zm8 0h2v2h-2zM8 4h2v2H8zm8 0h2v2h-2zm8 0h2v2h-2zM12 4h2v2h-2zm8 0h2v2h-2zm8 0h2v2h-2zM0 0h2v2H0zm4 0h2v2H4zM0 4h2v2H0zm4 0h2v2H4zm36-4h2v2h-2zm4 0h2v2h-2zm-4 4h2v2h-2zm4 0h2v2h-2zM32 0h2v2h-2zm4 0h2v2h-2zm-4 4h2v2h-2zm4 0h2v2h-2zm20-4h2v2h-2zm8 0h2v2h-2zm-4 0h2v2h-2zm8 0h2v2h-2zM56 4h2v2h-2zm8 0h2v2h-2zm-4 0h2v2h-2zm8 0h2v2h-2zM48 0h2v2h-2zm4 0h2v2h-2zm-4 4h2v2h-2zm4 0h2v2h-2z\'/%3E%3C/svg%3E");\n    background-repeat: no-repeat;\n    content: "";\n    display: block;\n    position: absolute;\n    height: 1rem;\n    width: 4.375rem;\n    left: calc(50% - 2.1875rem);\n    top: .5rem;\n  }\n  .close-button {\n    position: absolute;\n    right: 0;\n    top: 0;\n  }\n  .translate-content {\n    padding: 0.8rem;\n  }\n  #result {\n    max-height: 300px;\n    overflow: auto;\n    line-height: 1.6em;\n  }\n</style>\n\n<div class="translate-popover card" id="draggable" style="width: 550px;">\n  <button class="close-button btn btn-clear btn-lg m-1" id="close-button"></button>\n  <div class="title-bar c-move" id="dragzone">\n    <div class="drag-handle"></div>\n  </div>\n  <div class="translate-content">\n    <div class="input-group">\n      <label class="form-label text-tiny pt-2 pr-2" for="language-select" id="language-select-label">Translate to:</label>\n      <select class="form-select select-sm m-1 px-2" id="language-select" style="font-size: 0.9em;">\n      </select>\n    </div>\n    <div class="divider"></div>\n    <div class="py-2">\n      <div class="loading loading-lg" id="spinner"></div>\n      <div class="text-small d-none" id="result"></div>\n    </div>\n  </div>\n</div>',this.shadow.append(t),this.#e=this.shadowRoot.getElementById("draggable");const n=this.shadowRoot.getElementById("dragzone");!function(e,t){let n=0,a=0,s=0,o=0;const r=t=>{t.preventDefault(),n=s-t.clientX,a=o-t.clientY,s=t.clientX,o=t.clientY,e.style.top=e.offsetTop-a+"px",e.style.left=e.offsetLeft-n+"px"},i=()=>{document.onmouseup=null,document.onmousemove=null,e.classList.remove("drag")};t.onmousedown=e=>{e.preventDefault(),s=e.clientX,o=e.clientY,document.onmouseup=i,document.onmousemove=r}}(this.#e,n),this.#t=this.shadowRoot.querySelector("#close-button"),this.#t.addEventListener("click",(()=>{this.dispatchEvent(new CustomEvent("close"))})),this.#a=this.shadowRoot.getElementById("result"),this.#s=this.shadowRoot.getElementById("spinner");this.shadowRoot.getElementById("language-select-label").textContent=browser.i18n.getMessage("layout_header_label_language_switch");const a=browser.i18n.getUILanguage().split("-").shift().toUpperCase();this.#n=this.shadowRoot.getElementById("language-select");for(const e of v){const t=new Option(browser.i18n.getMessage(`supported_languages_${e.code}`),e.code,!1,e.code===a);this.#n.add(t)}this.#n.addEventListener("change",this.#o.bind(this)),browser.storage.local.get(["selectedTargetLanguage"],(e=>{this.#r(e.selectedTargetLanguage)})),browser.storage.onChanged.addListener(((e,t)=>{"local"===t&&"selectedTargetLanguage"in e&&this.#r(e.selectedTargetLanguage.newValue)}))}static get observedAttributes(){return["loading","position","result","error","lang"]}attributeChangedCallback(e,t,n){switch(e){case"loading":this.#i("true"===n);break;case"position":const{x:e,y:t}=JSON.parse(n);this.#c(e,t);break;case"result":this.#a.innerHTML=function(e){const t=document.createElement("div");return t.textContent=e,t.innerHTML}(n).split("\n").join("<br>");break;case"error":this.#a.innerHTML=`<span class="text-error">${n}</span>`;break;case"lang":for(const e of this.#a.classList)e.startsWith("lang-")&&this.#a.classList.remove(e);"ZH"===n?this.#a.classList.add("lang-zh-hans"):"JA"===n&&this.#a.classList.add("lang-ja")}}on(e,t){this.addEventListener(e,t)}#r(e){e&&v.some((t=>t.code===e.toUpperCase()))&&(this.#n.value=e)}#c(e,t){this.#e.style.top=`${t}px`,this.#e.style.left=`${e}px`}#i(e){e?(this.#s.classList.remove("d-none"),this.#a.classList.add("d-none")):(this.#s.classList.add("d-none"),this.#a.classList.remove("d-none"))}#o(e){this.dispatchEvent(new CustomEvent("change",{detail:{selectedSourceLanguage:void 0,selectedTargetLanguage:this.#n.value}}))}}const L=browser.i18n.getMessage("full_page_translation_ongoing_translation");new class{#l=1;#d=void 0;#u=void 0;#h={};#g={};#p=!1;#m=!1;#f=!1;#v=[];constructor(){this.#b()}#b(){window.customElements.get("translate-popover")||window.customElements.define("translate-popover",x),this.#w()}#w(){browser.runtime.onMessage.addListener((async(e,t,n)=>{if(e)switch(e.method){case"translate":this.#m=!0,await this.#y(e),function(e,t){let n;return function(){return e&&(n=e.apply(t||this,arguments),e=void 0),n}}(function(e,t=200){if(!e||"function"!=typeof e)return;let n;window.addEventListener("scroll",(function(a){window.clearTimeout(n),n=setTimeout(e,t)}),!0)}((async()=>{const e=function(e,t=250){let n;return(...a)=>{clearTimeout(n),n=setTimeout((()=>{e(...a)}),t)}}((async()=>{await this.#y({sourceLanguage:this.#d,targetLanguage:this.#u})}),250);this.#m&&e()})))(),n();break;case"getContentState":this.#p?n({result:{isProcessing:this.#p}}):Object.keys(this.#h).length>0?n({result:{sourceLanguage:this.#d,targetLanguage:this.#u,isShowingOriginal:this.#f}}):n(void 0);break;case"showOriginal":{this.#m=!1,this.#f=!0;const e=document.querySelectorAll('[data-wtdl-translated="true"]');for(const t of e){const e=t.dataset.wtdlUid,n=this.#h[e];t.innerHTML=n,t.dataset.wtdlTranslated="false"}n();break}case"startTranslateSelection":{const e=window.getSelection().getRangeAt(0).getBoundingClientRect();this.#x({x:e.x,y:e.bottom+window.pageYOffset+30}).setAttribute("loading",!0),n();break}case"finishTranslateSelection":{const t=e.result,a=document.getElementById("translate-popover");if(a){if(t.result&&t.result.texts){const n=t.result.texts.map((e=>e.text)).join("\n");a.setAttribute("result",`${n}`),a.setAttribute("lang",`${e.targetLanguage||""}`)}else if(t.error){const e=browser.i18n.getMessage("error_message_generic_error");a.setAttribute("error",e)}else{const e=browser.i18n.getMessage("error_message_generic_error");a.setAttribute("error",e)}a.setAttribute("loading",!1)}n();break}default:n()}}))}#x(e){const t="translate-popover",n=document.getElementById(t);if(n)return n;{document.body.insertAdjacentHTML("beforeend",`<translate-popover id="${t}"></translate-popover>`);const n=document.getElementById(t),a=e=>{e.target.closest(t)||(n.remove(),document.removeEventListener("click",a))};return document.addEventListener("click",a),n.on("close",(async()=>{n.remove(),document.removeEventListener("click",a)})),n.on("change",(async e=>{await chrome.storage.local.set(e.detail);const t={method:"translateSelection",selectionText:e.detail.selectionText};browser.runtime.sendMessage(t)})),n.setAttribute("position",JSON.stringify(e)),n}}async#y(e){this.#L();const t=document.querySelectorAll('[data-wtdl-translated="false"]');if(this.#u===e.targetLanguage)for(const e of t){const t=e.dataset.wtdlUid,n=this.#g[t];e.innerHTML=n,e.dataset.wtdlTranslated="true"}const n=await async function(){const e=[];T(document.body.children,e);const t=[];for(const n of e){!await b(n)||void 0!==n.dataset.wtdlUid&&"false"!==n.dataset.wtdlTranslated||n.parentElement.classList.contains("snackbar-container")||t.push({element:n,text:n.innerHTML})}return t}();if(n.length>0){const t=n.map((e=>e.text)),a=await browser.runtime.sendMessage({method:"translate",texts:t,sourceLanguage:e.sourceLanguage,targetLanguage:e.targetLanguage});if(a&&a.result){const t=a.result.result;if(t&&t.texts){this.#d=t.lang,this.#u=e.targetLanguage;const a=t.texts;if(a.length===n.length)for(let e=0;e<n.length;e++){const t=n[e].element,s=a[e].text,o=t.dataset.wtdlUid||this.#l++;"true"!==t.dataset.wtdlOriginal&&(this.#h[o]=t.innerHTML),this.#g[o]=s,t.innerHTML=s,t.dataset.wtdlUid=`${o}`,t.dataset.wtdlOriginal="true",t.dataset.wtdlTranslated="true"}}}}this.#T()}#L(){0===this.#v.length&&f().show({text:`<svg width="24" height="24" fill="#fff" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M10.72,19.9a8,8,0,0,1-6.5-9.79A7.77,7.77,0,0,1,10.4,4.16a8,8,0,0,1,9.49,6.52A1.54,1.54,0,0,0,21.38,12h.13a1.37,1.37,0,0,0,1.38-1.54,11,11,0,1,0-12.7,12.39A1.54,1.54,0,0,0,12,21.34h0A1.47,1.47,0,0,0,10.72,19.9Z"><animateTransform attributeName="transform" type="rotate" dur="0.75s" values="0 12 12;360 12 12" repeatCount="indefinite"/></path></svg><span style="line-height: 24px; vertical-align: top; padding: 0 12px 0 12px; font-size: 1.2em;">${L}...</span>`,actionText:'<span style="line-height: 14px; font-size: 1.8em;">×</span>',actionTextColor:"#fff",pos:"bottom-center",duration:void 0}),this.#v.push(!0),this.#p=!0,this.#f=!1,browser.runtime.sendMessage({method:"startTranslation"})}#T(){this.#p=!1,browser.runtime.sendMessage({method:"finishTranslation",result:{sourceLanguage:this.#d,targetLanguage:this.#u}}),1===this.#v.length&&f().close(),this.#v.pop()}};function T(e,t){for(const n of e)if((w(n)||y(n))&&n.clientHeight<window.innerHeight)t.push(n);else{const e=n.children;if(!e||0===e.length)continue;T(n.children,t)}}})()})();